<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0070)http://blog.163.com/huchengsz@126/blog/static/73483745201181824629285/ -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh"><head><meta http-equiv="Content-Type" content="text/html; charset=GBK">
    <meta http-equiv="X-UA-Compatible" content="IE=7">
    
    <meta http-equiv="content-style-type" content="text/css">
    <meta http-equiv="content-script-type" content="text/javascript">
    <meta name="version" content="neblog-1.0">
    <script type="text/javascript">
      
      
      document.uniqueID!=document.uniqueID&&!!location.hash&&(location.hash=location.hash); 
      document.domain = location.hostname.replace(/^.*\.([\w]+\.[\w]+)$/,'$1');
      window.focus();
      window.getMusicTimeStamp=function(){return 'c8bcd384376b9a2392ca126c4b2a4dd4';};
    </script>
<title>Epoll模型详解 - 成的日志 - 网易博客</title>
<meta name="author" content="huchengsz@126,成">
<meta name="keywords" content="Epoll模型详解,日志,成,我的博客,网易博客,网易,blog">
<meta name="description" content="Epoll模型详解,成的网易博客,">
  <script type="text/javascript">
    (function(){
     var R=24,C=11,a=[];
     for(var i=0;i<C;i++)for(var j=0;j<R;a.push('.icn0-'+i+j+'{background-position:'+(i>0?('-'+i*40+'px'):'0')+' '+(j>0?('-'+j*20+'px'):'0')+';}'),j++);
          document.write('<style type="text/css">'+a.join('')+'</st'+'yle>');
    })();
  </script><style type="text/css">.icn0-00{background-position:0 0;}.icn0-01{background-position:0 -20px;}.icn0-02{background-position:0 -40px;}.icn0-03{background-position:0 -60px;}.icn0-04{background-position:0 -80px;}.icn0-05{background-position:0 -100px;}.icn0-06{background-position:0 -120px;}.icn0-07{background-position:0 -140px;}.icn0-08{background-position:0 -160px;}.icn0-09{background-position:0 -180px;}.icn0-010{background-position:0 -200px;}.icn0-011{background-position:0 -220px;}.icn0-012{background-position:0 -240px;}.icn0-013{background-position:0 -260px;}.icn0-014{background-position:0 -280px;}.icn0-015{background-position:0 -300px;}.icn0-016{background-position:0 -320px;}.icn0-017{background-position:0 -340px;}.icn0-018{background-position:0 -360px;}.icn0-019{background-position:0 -380px;}.icn0-020{background-position:0 -400px;}.icn0-021{background-position:0 -420px;}.icn0-022{background-position:0 -440px;}.icn0-023{background-position:0 -460px;}.icn0-10{background-position:-40px 0;}.icn0-11{background-position:-40px -20px;}.icn0-12{background-position:-40px -40px;}.icn0-13{background-position:-40px -60px;}.icn0-14{background-position:-40px -80px;}.icn0-15{background-position:-40px -100px;}.icn0-16{background-position:-40px -120px;}.icn0-17{background-position:-40px -140px;}.icn0-18{background-position:-40px -160px;}.icn0-19{background-position:-40px -180px;}.icn0-110{background-position:-40px -200px;}.icn0-111{background-position:-40px -220px;}.icn0-112{background-position:-40px -240px;}.icn0-113{background-position:-40px -260px;}.icn0-114{background-position:-40px -280px;}.icn0-115{background-position:-40px -300px;}.icn0-116{background-position:-40px -320px;}.icn0-117{background-position:-40px -340px;}.icn0-118{background-position:-40px -360px;}.icn0-119{background-position:-40px -380px;}.icn0-120{background-position:-40px -400px;}.icn0-121{background-position:-40px -420px;}.icn0-122{background-position:-40px -440px;}.icn0-123{background-position:-40px -460px;}.icn0-20{background-position:-80px 0;}.icn0-21{background-position:-80px -20px;}.icn0-22{background-position:-80px -40px;}.icn0-23{background-position:-80px -60px;}.icn0-24{background-position:-80px -80px;}.icn0-25{background-position:-80px -100px;}.icn0-26{background-position:-80px -120px;}.icn0-27{background-position:-80px -140px;}.icn0-28{background-position:-80px -160px;}.icn0-29{background-position:-80px -180px;}.icn0-210{background-position:-80px -200px;}.icn0-211{background-position:-80px -220px;}.icn0-212{background-position:-80px -240px;}.icn0-213{background-position:-80px -260px;}.icn0-214{background-position:-80px -280px;}.icn0-215{background-position:-80px -300px;}.icn0-216{background-position:-80px -320px;}.icn0-217{background-position:-80px -340px;}.icn0-218{background-position:-80px -360px;}.icn0-219{background-position:-80px -380px;}.icn0-220{background-position:-80px -400px;}.icn0-221{background-position:-80px -420px;}.icn0-222{background-position:-80px -440px;}.icn0-223{background-position:-80px -460px;}.icn0-30{background-position:-120px 0;}.icn0-31{background-position:-120px -20px;}.icn0-32{background-position:-120px -40px;}.icn0-33{background-position:-120px -60px;}.icn0-34{background-position:-120px -80px;}.icn0-35{background-position:-120px -100px;}.icn0-36{background-position:-120px -120px;}.icn0-37{background-position:-120px -140px;}.icn0-38{background-position:-120px -160px;}.icn0-39{background-position:-120px -180px;}.icn0-310{background-position:-120px -200px;}.icn0-311{background-position:-120px -220px;}.icn0-312{background-position:-120px -240px;}.icn0-313{background-position:-120px -260px;}.icn0-314{background-position:-120px -280px;}.icn0-315{background-position:-120px -300px;}.icn0-316{background-position:-120px -320px;}.icn0-317{background-position:-120px -340px;}.icn0-318{background-position:-120px -360px;}.icn0-319{background-position:-120px -380px;}.icn0-320{background-position:-120px -400px;}.icn0-321{background-position:-120px -420px;}.icn0-322{background-position:-120px -440px;}.icn0-323{background-position:-120px -460px;}.icn0-40{background-position:-160px 0;}.icn0-41{background-position:-160px -20px;}.icn0-42{background-position:-160px -40px;}.icn0-43{background-position:-160px -60px;}.icn0-44{background-position:-160px -80px;}.icn0-45{background-position:-160px -100px;}.icn0-46{background-position:-160px -120px;}.icn0-47{background-position:-160px -140px;}.icn0-48{background-position:-160px -160px;}.icn0-49{background-position:-160px -180px;}.icn0-410{background-position:-160px -200px;}.icn0-411{background-position:-160px -220px;}.icn0-412{background-position:-160px -240px;}.icn0-413{background-position:-160px -260px;}.icn0-414{background-position:-160px -280px;}.icn0-415{background-position:-160px -300px;}.icn0-416{background-position:-160px -320px;}.icn0-417{background-position:-160px -340px;}.icn0-418{background-position:-160px -360px;}.icn0-419{background-position:-160px -380px;}.icn0-420{background-position:-160px -400px;}.icn0-421{background-position:-160px -420px;}.icn0-422{background-position:-160px -440px;}.icn0-423{background-position:-160px -460px;}.icn0-50{background-position:-200px 0;}.icn0-51{background-position:-200px -20px;}.icn0-52{background-position:-200px -40px;}.icn0-53{background-position:-200px -60px;}.icn0-54{background-position:-200px -80px;}.icn0-55{background-position:-200px -100px;}.icn0-56{background-position:-200px -120px;}.icn0-57{background-position:-200px -140px;}.icn0-58{background-position:-200px -160px;}.icn0-59{background-position:-200px -180px;}.icn0-510{background-position:-200px -200px;}.icn0-511{background-position:-200px -220px;}.icn0-512{background-position:-200px -240px;}.icn0-513{background-position:-200px -260px;}.icn0-514{background-position:-200px -280px;}.icn0-515{background-position:-200px -300px;}.icn0-516{background-position:-200px -320px;}.icn0-517{background-position:-200px -340px;}.icn0-518{background-position:-200px -360px;}.icn0-519{background-position:-200px -380px;}.icn0-520{background-position:-200px -400px;}.icn0-521{background-position:-200px -420px;}.icn0-522{background-position:-200px -440px;}.icn0-523{background-position:-200px -460px;}.icn0-60{background-position:-240px 0;}.icn0-61{background-position:-240px -20px;}.icn0-62{background-position:-240px -40px;}.icn0-63{background-position:-240px -60px;}.icn0-64{background-position:-240px -80px;}.icn0-65{background-position:-240px -100px;}.icn0-66{background-position:-240px -120px;}.icn0-67{background-position:-240px -140px;}.icn0-68{background-position:-240px -160px;}.icn0-69{background-position:-240px -180px;}.icn0-610{background-position:-240px -200px;}.icn0-611{background-position:-240px -220px;}.icn0-612{background-position:-240px -240px;}.icn0-613{background-position:-240px -260px;}.icn0-614{background-position:-240px -280px;}.icn0-615{background-position:-240px -300px;}.icn0-616{background-position:-240px -320px;}.icn0-617{background-position:-240px -340px;}.icn0-618{background-position:-240px -360px;}.icn0-619{background-position:-240px -380px;}.icn0-620{background-position:-240px -400px;}.icn0-621{background-position:-240px -420px;}.icn0-622{background-position:-240px -440px;}.icn0-623{background-position:-240px -460px;}.icn0-70{background-position:-280px 0;}.icn0-71{background-position:-280px -20px;}.icn0-72{background-position:-280px -40px;}.icn0-73{background-position:-280px -60px;}.icn0-74{background-position:-280px -80px;}.icn0-75{background-position:-280px -100px;}.icn0-76{background-position:-280px -120px;}.icn0-77{background-position:-280px -140px;}.icn0-78{background-position:-280px -160px;}.icn0-79{background-position:-280px -180px;}.icn0-710{background-position:-280px -200px;}.icn0-711{background-position:-280px -220px;}.icn0-712{background-position:-280px -240px;}.icn0-713{background-position:-280px -260px;}.icn0-714{background-position:-280px -280px;}.icn0-715{background-position:-280px -300px;}.icn0-716{background-position:-280px -320px;}.icn0-717{background-position:-280px -340px;}.icn0-718{background-position:-280px -360px;}.icn0-719{background-position:-280px -380px;}.icn0-720{background-position:-280px -400px;}.icn0-721{background-position:-280px -420px;}.icn0-722{background-position:-280px -440px;}.icn0-723{background-position:-280px -460px;}.icn0-80{background-position:-320px 0;}.icn0-81{background-position:-320px -20px;}.icn0-82{background-position:-320px -40px;}.icn0-83{background-position:-320px -60px;}.icn0-84{background-position:-320px -80px;}.icn0-85{background-position:-320px -100px;}.icn0-86{background-position:-320px -120px;}.icn0-87{background-position:-320px -140px;}.icn0-88{background-position:-320px -160px;}.icn0-89{background-position:-320px -180px;}.icn0-810{background-position:-320px -200px;}.icn0-811{background-position:-320px -220px;}.icn0-812{background-position:-320px -240px;}.icn0-813{background-position:-320px -260px;}.icn0-814{background-position:-320px -280px;}.icn0-815{background-position:-320px -300px;}.icn0-816{background-position:-320px -320px;}.icn0-817{background-position:-320px -340px;}.icn0-818{background-position:-320px -360px;}.icn0-819{background-position:-320px -380px;}.icn0-820{background-position:-320px -400px;}.icn0-821{background-position:-320px -420px;}.icn0-822{background-position:-320px -440px;}.icn0-823{background-position:-320px -460px;}.icn0-90{background-position:-360px 0;}.icn0-91{background-position:-360px -20px;}.icn0-92{background-position:-360px -40px;}.icn0-93{background-position:-360px -60px;}.icn0-94{background-position:-360px -80px;}.icn0-95{background-position:-360px -100px;}.icn0-96{background-position:-360px -120px;}.icn0-97{background-position:-360px -140px;}.icn0-98{background-position:-360px -160px;}.icn0-99{background-position:-360px -180px;}.icn0-910{background-position:-360px -200px;}.icn0-911{background-position:-360px -220px;}.icn0-912{background-position:-360px -240px;}.icn0-913{background-position:-360px -260px;}.icn0-914{background-position:-360px -280px;}.icn0-915{background-position:-360px -300px;}.icn0-916{background-position:-360px -320px;}.icn0-917{background-position:-360px -340px;}.icn0-918{background-position:-360px -360px;}.icn0-919{background-position:-360px -380px;}.icn0-920{background-position:-360px -400px;}.icn0-921{background-position:-360px -420px;}.icn0-922{background-position:-360px -440px;}.icn0-923{background-position:-360px -460px;}.icn0-100{background-position:-400px 0;}.icn0-101{background-position:-400px -20px;}.icn0-102{background-position:-400px -40px;}.icn0-103{background-position:-400px -60px;}.icn0-104{background-position:-400px -80px;}.icn0-105{background-position:-400px -100px;}.icn0-106{background-position:-400px -120px;}.icn0-107{background-position:-400px -140px;}.icn0-108{background-position:-400px -160px;}.icn0-109{background-position:-400px -180px;}.icn0-1010{background-position:-400px -200px;}.icn0-1011{background-position:-400px -220px;}.icn0-1012{background-position:-400px -240px;}.icn0-1013{background-position:-400px -260px;}.icn0-1014{background-position:-400px -280px;}.icn0-1015{background-position:-400px -300px;}.icn0-1016{background-position:-400px -320px;}.icn0-1017{background-position:-400px -340px;}.icn0-1018{background-position:-400px -360px;}.icn0-1019{background-position:-400px -380px;}.icn0-1020{background-position:-400px -400px;}.icn0-1021{background-position:-400px -420px;}.icn0-1022{background-position:-400px -440px;}.icn0-1023{background-position:-400px -460px;}</style>
    <link type="text/css" rel="stylesheet" href="./Epoll模型详解 - 成的日志 - 网易博客_files/c.css">
    <link type="text/css" rel="stylesheet" href="./Epoll模型详解 - 成的日志 - 网易博客_files/nb.css" id="blog-163-com-theme">
  <!--[if lte IE 6]>
  <style type="text/css">
    html,body,#blog-163-com-ie6body{height:100%;width:100%;overflow:hidden;}
    #blog-163-com-ie6body{overflow:auto;overflow-y:scroll;}
    #blog-163-com{background:none;}
  </style>
  <![endif]-->
  
  
  <style type="text/css">.m-3 .nbw-ryt .left .mcnt{padding-left:10px;}.m-3 .nbw-ryt .right .acts{position:relative;margin:0 0 12px 0;line-height:20px;}.m-3 .nbw-ryt .right .more{margin-top:-15px;height:24px;line-height:24px;}#blog-163-com .m-3 .phide{display:none;}.m-3 .nbw-ryt .left .nbw-bitm{margin:0;padding:0 0 0 10px;position:relative;}.m-3 .nbw-ryt .left .nbw-bitm .title{margin:30px 0 20px;}.m-3 .nbw-ryt .left .nbw-bitm .title .tcnt{font-size:20px;font-family:'微软雅黑','黑体',Arial,Helvetica,Sans-Serif;}.m-3 .nbw-ryt .left .nbw-bitm .tdep{margin-bottom:20px;}.m-3 .nbw-ryt .left .nbw-bitm .tbar{margin:5px 0;padding:10px 10px 10px 0;line-height:20px;text-align:right;}.m-3 .nbw-ryt .left .nbw-bitm .bct{font-size:14px;padding-left:0}.m-3 .nbw-ryt .left .nbw-bitm .muava{float:left;margin:5px 7px 0 0;border-width:0 1px 0 0;height:40px;}.m-3 .nbw-ryt .left .snl .pnb div{line-height:20px;text-align:left;}.m-3 .nbw-ryt .cite{margin:20px 0 0 50px;line-height:24px;text-align:left;}.m-3 .nbw-ryt .cite .close{float:right;margin:0;text-align:right;}.m-3 .nbw-ryt .cite span{cursor:pointer;}.m-3 .nbw-ryt .cite .nbw-act{text-align:center;}.m-3 .nbw-ryt .cite .ads{margin-left:20px;width:400px;}.m-3 .nbw-ryt .cite .tbac{margin-left:60px;padding:0;border:0;list-style:none;line-height:24px;}.m-3 .nbw-ryt .cite .tbl{width:150px;overflow:hidden;}.m-3 .nbw-ryt .cite .tbr{margin-left:20px;overflow:hidden;}.m-3 .nbw-act-share{position:relative;}.m-3 .nbw-act-share .nas-wrap{visibility:hidden;}.m-3 .nbw-act-share:hover .nas-wrap,.m-3 .js-share-hover .nas-wrap{visibility:visible;}.m-3 .nas-wrap,.nas-itm,.nas-wb{background:url(/newpage/images/blog/icn-share.png?0011) no-repeat 9999px 9999px;}.m-3 .nas-wrap{margin-top:5px;}.nas-itm,.nas-wb{text-decoration:none;}.nas-itm,.nas-wb:hover{text-decoration:underline;}.m-3 .nas-itm{float:left;width:16px;height:16px;margin:0 1px 0 6px;overflow:hidden;cursor:pointer;}.m-3 .nas-itm0{background-position:0 -173px;}.m-3 .nas-itm1{background-position:0 -56px;}.m-3 .nas-itm2{background-position:0 -85px;}.m-3 .nas-itm3{background-position:0 -227px;}.m-3 .nas-itm4{background-position:0 -143px;}.m-3 .nas-itm5{background-position:0 -201px;}.m-3 .nas-itm6{background-position:0 -249px;}.m-3 .nas-itm7{background-position:0 -283px;}.m-3 .nas-itm8{background-position:0 -313px;}.m-3 .nas-itm9{background-position:0 -342px;}.nas-wb{padding-left:20px;cursor:pointer;line-height:normal;background-position:0 -173px;}.nas-icn0fix{margin-top:4px;}.nas-tofix{margin-top:0;*margin-top:2px;line-height:25px;}.m-3 .ptc{position:absolute;cursor:pointer;}.m-3 .ptc .ptcp .bcmimg{float:left;background-image:url("http://b.bst.126.net/newpage/images/blogcmtimg.png");background-position:0 0;background-repeat:no-repeat;height:22px;line-height:22px;width:22px;padding:0 6px 0 0;}.m-3 .ptc .ptcp{cursor:pointer;position:absolute;left:5px;bottom:5px;clear:both;width:94px;}.m-3 .ptc .ptcp .ptcmi{float:left;width:16px;height:16px;padding:3px 6px 3px 5px;_padding:2px 6px 0 3px;margin:0;}.m-3 .ptc .ptcp .ptcmt{background-position:-418px -50px;float:left;width:67px;height:22px;overflow:hidden;margin:0px 0 0 -3px;line-height:22px;*line-height:23px;text-align:left;color:#444444;}.m-3 .ptc .ptcp .ptcmt-2{width:61px;padding-left:6px;background-position:-424px -50px;}.m-3 .relateblog{text-align:left;}.m-3 .relateblog h4{margin:0;padding:0 0 0 10px;line-height:30px;}.m-3 .relateblog .cnt{padding-left:8px;margin:10px 0 10px 0px;}.m-3 .relateblog .cnt ul{margin:0;padding:0;list-style:none;}.m-3 .relateblog .cnt ul li{height:24px;margin-right:20px;line-height:24px;}.m-3 .relateblog .cnt ul li span{margin:0 8px;}.m-3 .author, .m-3 .comment{text-align:left;}.m-3 .author .nlogif{width:150px;line-height:20px;margin-left:5px;_margin-left:3px;}.m-3 .author .nlogif .nbw-fce{margin:0 3px 0 10px;_margin-left:5px}.m-3 .author .nlogif .pright{width:85px;margin:0;padding:5px 0;_padding-top:10px}.m-3 .nbw-ryt .right h4{margin:0;padding:0;line-height:30px;}.m-3 .author h4, .m-3 .comment h4{margin:0;padding:0 0 0 10px;line-height:30px;}.m-3 .author .cwd{border:0;text-align:left;}.m-3 .author .vname{width:50px;text-align:center;}.m-3 .author .cnt{margin:10px 0 10px -5px;}.m-3 .author .nbw-fce{margin:0 11px;}.m-3 .author .nbw-f50{width:50px}.m-3 .nbw-ryt .left .top{position:relative;padding-bottom:5px;line-height:20px;}.m-3 .nbw-ryt .left .top .ilft{position:absolute;left:0;top:0;}.m-3 .nbw-ryt .left .top .irgt{position:absolute;right:-10px;top:0;}.m-3 .nbw-ryt .left .top .pleft{margin-left:20px;_margin-left:10px;overflow:hidden;width:40%;height:20px;text-align:left}.m-3 .nbw-ryt .left .top .pright{margin-right:10px;_margin-right:5px;overflow:hidden;width:40%;height:20px;text-align:right}.m-3 .nbw-ryt .left .snl .top{position:relative;padding:5px 0 15px 0;line-height:20px;}.m-3 .nbw-ryt .left .snl .top .ilft{position:absolute;left:-10px;top:5px;}.m-3 .nbw-ryt .left .snl .top .irgt{position:absolute;right:-10px;top:5px;}.m-3 .nbw-ryt .left .snl .top .pleft{margin-left:10px;_margin-left:5px;overflow:hidden;width:40%;height:20px;text-align:left}.m-3 .nbw-ryt .left .snl .top .pright{margin-right:10px;_margin-left:5px;overflow:hidden;width:40%;height:20px;text-align:right}.m-3 .nbw-ryt .left .snl .pnb{padding:5px 0 10px 10px;overflow:hidden;_width:100%}.m-3 .comment h4{padding:0 0 0 10px}.m-3 .comment .publish{margin:10px 0;padding:0 0 10px 5px;text-align:left;}.m-3 .comment .publish .nbw-fce{padding-top:0;}.m-3 .comment .publish .nbw-fce .cwd{border:0;}.m-3 .comment .publish .redt{margin-left:65px;}.m-3 .comment .nolog{border:1px solid #000;background-color:#FFFFE1;height:40px;line-height:40px;text-align:center;padding:0;_padding:10px 0;_height:20px;}.m-3 .comment .case{padding-left:5px;padding-bottom:10px;}.m-3 .comment .vgl{margin:8px;width:75%;text-align:center;}#blog-163-com .m-3 .comment .nbw-cmt .cnt{width:488px;}#blog-163-com .m-3 .comment .nbw-cmt .nbw-cmt .cnt{width:444px;}.m-3 .edt-cmt{width:444px;}.m-3 .comment .publish .edt-cmt{width:488px;}.m-3 .comment .publish .edt-cmt .zbcc{display:none;}.m-3 .nbw-ryt .left .nbw-bitm .js-fs0{font-size:150%;}.m-3 .nbw-ryt .left .nbw-bitm .js-fs1{font-size:130%;}.m-3 .nbw-ryt .left .nbw-bitm .js-fs2{}.m-3 .nbw-ryt .left .nbw-bitm .js-fs3{font-size:12px;}.m-3 .js-fcurrent{font-color:#000;font-weight:bold;text-decoration:none;}.m-3 .nbw-bitm .dream{margin-top:-10px;clear:both}.m-3 .nbw-bitm .cited{margin-top:-15px;}.m-3 .nbw-bitm .rdif{line-height:24px;height:24px;}.m-3 .nbw-bitm .rdif .pnt{line-height:24px;height:24px;margin-right:10px;}.m-3 .nbw-bitm .rdif .pclass{vertical-align:middle;width:57px;height:22px;}.m-3 .nbw-bitm .rdif .rdct{display:inline-block;}.m-3 .snl .rdcnt{padding:5px;text-align:left}.m-3 .snl .rdcnt .nbw-fce{margin:0 5px}.m-3 .snl .rdcnt p{margin:10px 0}.m-3 .snl .rdcnt .rrb{list-style:none;height:22px;line-height:22px;}.m-3 .acts .iblock{width:18px;}.m-3 .ns{margin:0 0 0 2px;}.m-3 .cancel{display:none;}.m-3 .js-hover .cancel, .m-3 .follow:hover .cancel, .m-3 .frd:hover .cancel{display:inline;}.m-3 .follow{*margin-left:2px;}.m-3 .flw{padding:7px 8px;color:#000;background:#fefce4;border:1px solid #b7b7b7;}.m-3 .acts .flw .iblock{width:20px;}.m-3 .sntesctf{width:15px;margin-left:3px;}.dr-warm{width:420px;padding:12px 18px;margin:18px 0;line-height:20px;border:1px solid #aaa;color:#666;background:#ffffdc;}.dr-warm a,.dr-warm a:hover{text-decoration:underline;color:#02a;}.dr-warm .codeinput{width:70px;text-align:center;}.dr-warm .codediv{margin:10px 0 0;}.dr-warm .ml{margin:0px 10px;vertical-align:middle;}.dr-warm .button{background-color:#77716F;width:42px;height:20px;border:0 none;color:#fff;cursor:pointer;}.m-3 .commentcntwrap{position:relative;zoom:1;}.m-3 .cmtMultiUserRole{position:absolute;left:62px;bottom:5px;width:300px;overflow-x;hidden;}.m-3 .cmtMultiUserRole .selectRole{float:right;padding:1px 1px 0 1px;border:none;}.m-3 .cmtMultiUserRole .selectRole .ztxt{float:left;width:auto;overflow:hidden;}.m-3 .cmtMultiUserRole .selectRole .zdwn{float:left;background:url("/newpage/images/icon.png") -240px -420px no-repeat;text-indent:-9999px;}.m-3 .cmtMultiUserRole .selectRole .zlst .zitm{}.m-3 .cmtMultiUserRole .selectRole .zlst .zitm:hover, .m-3 .cmtMultiUserRole .selectRole .slst .item.js-zhvr-910{color:#333;background-color:#ececec;}.m-3 .nbw-cmt{position:static;}.m-3 .nbw-cmt .thde{position:relative;zoom:1;}.m-3 .publish .redt{position:relative;zoom:1;}.m-3 .publish .redt .cmtMultiUserRole{left:135px;_left:132px;}.m-3 .cmtMultiUserRole .js-showlist{padding:0;margin:0;border-style:solid;border-width:1px 1px 0 1px;border-color:#aaa;}.m-3 .cmtMultiUserRole .js-showlist .zlst{border-style:solid;border-width:0 1px 1px 1px;border-color:#aaa;}.m-3 .multiuserItem{}.m-3 .multiuserItem .author{margin-right:-50px;}.m-3 .multiuserItem .multicntwrap{padding:30px 0 20px 0;}.m-3 .multiuserItem .multicnt{_padding-top:2px;margin-left:50px;}.m-3 .nbw-ryt .left .multiuserItem .multicnt .title{width:95%;margin-top:0;margin-bottom:0;}.m-3 .nbw-ryt .left .multiuserItem .multicnt .tdep{margin-bottom:0;}.m-3 .attachment{margin-bottom:20px;}.m-3 .awidth{width:40px;}.m-3 .view{margin-right:10px;}.m-3 .nbw-cmt .op{height:18px;line-height:18px;}.m-3 .suggestedreading{overflow:hidden;position:relative;zoom:1;}.m-3 .suggestedreading .m-list{margin-left:0;padding-left:15px;overflow:hidden;font-size:14px;}.m-3 .suggestedreading .m-list .gap{margin-left:8px;color:#ADADAD;}.m-3 .suggestedreading .m-list li{height:20px;padding:3px 0 2px;vertical-align:middle;}.m-3 .suggestedreading .wrap li{float:left;width:118px;height:146px;}.m-3 .suggestedreading .suggesteditem1{line-height:24px;margin:5px 0;font-size:12px;margin-right:10px;}.m-3 .suggestedreading .suggesteditem2{margin:5px 0;font-size:12px;}.m-3 .suggestedreading .suggesteditem2 .imgwrap1{position:relative;overflow:hidden;width:90px;height:90px;zoom:1;}.m-3 .suggestedreading .suggesteditem2 .imgwrap2{z-index:2;position:absolute;left:0;top:0;}.m-3 .suggestedreading .suggesteditem2 .btitle{width:96px;height:148px;overflow:hidden;text-decoration:none;}.m-3 .suggestedreading .suggesteditem2 .sep{padding:5px 10px 0 10px;}.m-3 .suggestedreading .suggesteditem2 a{cursor:pointer;}.m-3 .suggestedreading .suggesteditem2 a:hover{text-decoration:none;}.m-3 .suggestedreading .suggesteditem2 img{border-width:0;}.m-3 .suggestedreading .color1{background-color:#B3786B;}.m-3 .suggestedreading .color2{background-color:#D2C1A8;}.m-3 .suggestedreading .color3{background-color:#D46646;}.m-3 .suggestedreading .color4{background-color:#D28FA8;}.m-3 .suggestedreading .color5{background-color:#C84F54;}.m-3 .suggestedreading .white{color:white;}.m-3 .suggestedreading .imgtip{margin:2px;font-weight:bold;color:white;font-size:13px;font-family:微软雅黑;}.m-3 .suggestedreading .borderwrap{padding:2px;background-color:#fff;}.m-3 .suggestedreading .time{position:absolute;bottom:0;right:0;}.m-3 .suggestedreading .hidsep{margin-left:-1px;}.m-3 .suggestedreading .srtitle{font-size:14px;font-weight:bold;margin-bottom:10px;}.m-3 #yodaoad{padding-left:5px;}.m-3 #yodaoad_3{padding:20px 0 25px 0;}.m-3 .relategroup{width:45%}.m-3 .blogvote{padding-left:35px;position:relative;zoom:1;}.m-3 .blogvote .sep{margin:0 5px;}.m-3 .blogvote .vtitle{margin:15px 0 15px -30px;}.m-3 .blogvote .vtitle span{padding-right:8px;}.m-3 .blogvote .vtitle .close{width:60px;height:24px;vertical-align:middle;}.m-3 .blogvote .roleview{padding-right:10px}.m-3 .blogvote .roleview .iblock{width:10px}.m-3 .blogvote .options{clear:both;margin-right:10px}.m-3 .blogvote .options ul{margin:0;padding:0;list-style:none;}.m-3 .blogvote .options ul li{padding:10px 0;line-height:16px;}.m-3 .blogvote .options .role{margin-bottom:15px;}.m-3 .blogvote .options .acts{margin-bottom:15px;height:24px;line-height:26px;}.m-3 .blogvote .options .acts .leftpt{height:24px;line-height:26px;}.m-3 .blogvote .options .acts .leftpt button{height:24px;line-height:18px;}.m-3 .blogvote .options .acts .leftpt span{}.m-3 .blogvote .options .acts .view{margin-left:5px;}.m-3 .blogvote .fvote{padding-top:10px;}.m-3 .blogvote .fvote ul{list-style:none;margin:10px 0;padding:0;}.m-3 .blogvote .fvote ul li{line-height:20px;margin:5px 0;}.m-3 .blogvote .options ul .col0{width:230px;margin-right:10px;margin-top:-3px;_margin-top:-5px;line-height:20px}.m-3 .blogvote .options ul .col0 input{_position:relative;_top:3px}.m-3 .blogvote .options ul .col0 label{width:200px;_position:relative;_top:4px}.m-3 .blogvote .options ul .col1{width:190px;height:14px;line-height:14px;;background:none repeat scroll 0 0 #EAEAEA;}.m-3 .blogvote .options ul .col1 .iblock{width:100%;height:16px;vertical-align:middle;}.qing001{margin:0;border:none;}.qing001 .nb-mc{background:none;}.qing001 .nb-mc .cc{width:942px;padding:0;margin:0 auto;}.qing001 .nb-mc .cl{display:none;}.qing001 .nb-mc .cr{display:none;}.qing001 .bh{display:none;}.qing001 .nbw-ryt{background:url(/newpage/images/qingtheme/qing001/blogdetail_cntbg.png) 0 0 repeat-y;}.qing001 .nbw-ryt .left{background:url(/newpage/images/qingtheme/qing001/blogdetail_ftbg.png) bottom left no-repeat;}.qing001 .nbw-ryt .left .lcnt{width:100%;padding:0;margin:0;background:url(/newpage/images/qingtheme/qing001/blogdetail_ttlbg.png) 0 0 no-repeat;}.qing001 .nbw-ryt .left .mcnt{padding:0 30px;}.qing001 .nbw-ryt .left .nbw-bitm{padding:0;}.qing001 .nb-mt{display:none;}.qing001 .nbw-ryt .left .top{display:none;}.qing001 .nbw-ryt .left .nbw-bitm .title{height:31px;padding:30px 0 46px 3px;margin:0;}.qing001 .nbw-ryt .left .nbw-bitm .title .tcnt{color:#fffadc;font-size:24px;font-family:'微软雅黑','黑体',Arial,Helvetica,Sans-Serif;}.qing001 .nbw-ryt .left .nbw-bitm .tdep{padding-top:6px;}.qing001 .comment .case{padding-bottom:40px;}.m-3 .article .douban{float:left;width:200px;margin:0 10px 10px 0;font-size:12px;}.m-3 .article .douban .field{padding-top:5px;}.m-3 .article .douban .field .dbyinyue{width:10px;height:8px;border-width:0;}.m-3 .article .douban img{max-width:100%;width:100%;border-color:#e9e9e9;display:inline-block;border-width:1px;border-style:solid;}.m-3 .article-1 .douban{float:right;width:200px;margin:0 3px 10px 10px;}.m-3 .article-2 .douban{float:left;width:250px;margin:0 -250px 0 0;}.m-3 .article-2 .blog{margin-left:270px;}.m-3 .article-2 .blogc{width:99%;overflow:hidden;}.m-3 .article-3 .douban{float:right;width:250px;margin:0 3px 0 -250px;}.m-3 .article-3 .blog{margin-right:270px;}.m-3 .article-3 .blogc{width:99%;overflow:hidden;}.m-3 .vote_star{overflow:visible;}.m-3 .rateword{display:none;left:88px;width:37px;top:-2px;position:absolute;line-height:23px;}.m-3 .star_d0 .rateword0{display:inline;}.m-3 .star_d1 .rateword1{display:inline;}.m-3 .star_d2 .rateword2{display:inline;}.m-3 .star_d3 .rateword3{display:inline;}.m-3 .star_d4 .rateword4{display:inline;}.m-3 .star_d5 .rateword5{display:inline;}.m-3 .nbw-act .blogsep{margin:0 2px}.m-3 .zihao{position:relative;cursor:default;}.m-3 .zihaoshow{position:absolute;width:26px;top:-57px;left:-3px;padding:0 0 3px;line-height:18px;}.m-3 .zihaoshow span{display:block;text-align:center;cursor:pointer;}.m-3 .zihaoc{border-style:solid;border-width:1px;}.m-3 .mbga{margin-bottom:12px;position:relative;}.m-3 .mbga a{margin-left:20px;}.m-3 .mbgai{position:absolute;top:-1px;width:17px;background:url(/newpage/images/microblog.png?1) no-repeat;_background:none transparent;_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='http://b2.bst.126.net/newpage/images/microblog.png');_zoom:1;}.m-3 .mingxing{width:18px;background-position:-43px -80px;}.m-3 .xinxing{width:18px;background-position:-81px -80px;}.m-3 .darendesc{padding:7px 15px;margin-top:10px;line-height:18px;background:#efeae7;vertical-align:middle;}.m-3 .js-cmt-noavatar .nbw-cmt .nbw-fce{display:none;}.m-3 .js-cmt-noavatar .nbw-cmt .thde{padding-left:8px;margin-left:0;}.m-3 .js-cmt-noavatar .nbw-cmt .reps .thde{margin-left:55px;} </style>
  
  <link href="./Epoll模型详解 - 成的日志 - 网易博客_files/prettify.css" type="text/css" rel="stylesheet">
  <script type="text/javascript" src="./Epoll模型详解 - 成的日志 - 网易博客_files/related_items"></script><style type="text/css">.ui-2299189080 .zcvr,.ui-2299189080 .zhnt{display:none;position:fixed;_position:absolute;z-index:80;} .ui-2299189080 .zcvr{top:0;left:0;width:100%;height:100%;background:url(http://b.bst.126.net/common/empty.png);} .ui-2299189080 .zhnt{top:5px;right:5px;padding:4px;color:#000;background:#ffffae;z-index:120;}.ui-2014584831-hack{position:absolute;z-index:99;} .ui-2014584831{position:absolute;z-index:100;border:1px solid #97abc9;background-color:#fff;}.ui-4271895615-hack{position:absolute;z-index:99;} .ui-4271895615-cover{position:absolute;top:0;left:0;width:100%;height:100%;background:url(http://b.bst.126.net/common/empty.png);z-index:10;} .ui-4271895615{position:absolute;top:0;left:0;z-index:100;text-align:center;border:1px solid #97abc9;background-color:#fff;} .ui-4271895615 .ztbr{height:30px;line-height:30px;text-align:left;background-color:#5e9ff7;font-size:14px;font-weight:bold;color:#fff;} .ui-4271895615 .zmov{cursor:move;} .ui-4271895615 .zttl{width:85%;padding-left:10px;} .ui-4271895615 .zcls{position:absolute;top:5px;right:10px;width:20px;height:20px;overflow:hidden;cursor:pointer;z-index:5;} .ui-4271895615 .zcnt{padding:10px;min-height:100px;_height:100px;font-size:12px;} .ui-4271895615 .zext{display:none;} .ui-4271895615.js-zncls-102 .zcls{display:none;}.zbwin{color:#000;border:1px solid #aaa;background-color:#fff;} .zbwin .zcls{top:8px;background:url(http://b.bst.126.net/common/widget/wincls.gif) no-repeat 2px center;text-indent:50px;} .zbwin .ztbr{height:35px;line-height:35px;color:#000;background:url(http://b.bst.126.net/common/widget/winbar.gif) repeat-x;} .zbwin .zact{margin:10px 0;text-align:center;} .zbwin .ztxt{height:1.3em;padding-top:3px;} .zbwin .zbtn{height:28px;padding:0 8px;font-size:14px;cursor:pointer;} .zbwin .zbtnok{font-weight:bold;} .zbwin .zbtncc{margin-left:20px;}.ui-2191272282{position:relative;zoom:1;text-align:left;} .ui-2191272282-hack{position:absolute;z-index:99;} .ui-2191272282 .zcom{width:200px;border:1px solid #aaa;} .ui-2191272282 .zcse{visibility:hidden;position:absolute;top:20px;left:0;background:#fff;} .ui-2191272282 .zitm{width:100%;height:20px;line-height:20px;cursor:default;} .ui-2191272282 .zitm.js-zhvr-900{background-color:#316ac5;} .ui-2191272282 .zcse .js-login-hovered{background-color:#ddd;color:#fff;}.ui-5948170666 .iblock{display:-moz-inline-box;display:inline-block;*display:inline;zoom:1;} .ui-5948170666 .fs1{font-size:14px;} .ui-5948170666 .fw1{font-weight:bold;} .ui-5948170666 .noselect{user-select:none;-moz-user-select:none;-webkit-user-select:none;-khtml-user-select:none;-o-user-select:none;} .ui-5948170666 .zcvr,.ui-5948170666 .zhnt{display:none;position:fixed;_position:absolute;z-index:80;} .ui-5948170666 .zcvr{top:0;left:0;width:100%;height:100%;background:url(http://b.bst.126.net/common/empty.png);} .ui-5948170666 .zhnt{position:absolute;height:36px;line-height:36px;top:5px;right:5px;padding:11px 10px 11px 4px;color:#000;z-index:120;vertical-align:middle;} .ui-5948170666 .showhint-0{background-image:url(/common/showhint/hintbg.png);background-repeat:no-repeat;background-position:-7px -1px;_background-image:url(/common/showhint/hintbg2.png);} .ui-5948170666 .showhint-1{background-image:url(/common/showhint/hintbg_right.png);background-repeat:no-repeat;background-position:0px 0px;width:20px;_background-image:url(/common/showhint/hintbg2_right.png);} .ui-5948170666 .showhint-2{background-image:url(/common/showhint/hinticon.png);background-repeat:no-repeat;} .ui-5948170666 .showhint-2-0{background-position:0 1px;} .ui-5948170666 .showhint-2-1{background-position:0 -45px;} .ui-5948170666 .showhint-2-2{background-position:0 -90px;} .ui-5948170666 .showhint-3{background-image:url(/common/showhint/loading.gif);background-repeat:no-repeat;} .ui-5948170666 .typeicon{width:25px;height:25px;padding:4px 5px 7px 6px;margin:0 10px 0 15px;line-height:25px;vertical-align:middle;} .ui-5948170666 .typeicon .loading{width:25px;height:25px;line-height:25px;vertical-align:middle;} .ui-5948170666 .bg_right{position:absolute;right:-20px;top:2px;z-index:120;display:block;height:36px;padding:11px 0 11px 0;} .ui-5948170666 .txthint{vertical-align:middle;} .ui-5948170666 .showhint-bg{position:absolute;right:0;top:0;width:200px;height:30px;background:#f5f5f5;border:1px solid #ccc;} .ui-5948170666-hack{display:none;position:absolute;z-index:101;width:100%;height:100%;overflow:hidden;}.ui-1024507192-hack,.ui-1024507192-cvr-hack{position:absolute;z-index:99;} .ui-1024507192-cover{position:absolute;top:-99999px;left:-99999px;width:100%;height:100%;background:url(http://b.bst.126.net/common/empty.png);z-index:10;} .ui-1024507192{position:absolute;top:-99999px;left:-99999px;z-index:100;text-align:center;} .ui-1024507192 .ztbr{height:30px;line-height:30px;text-align:left;background-color:#5e9ff7;font-size:14px;font-weight:bold;/*color:#fff;*/} .ui-1024507192 .zmov{cursor:move;} .ui-1024507192 .zttl{width:85%;padding-left:10px;} .ui-1024507192 .zcls{position:absolute;top:5px;right:10px;width:20px;height:20px;overflow:hidden;cursor:pointer;z-index:5;} .ui-1024507192 .zcnt{padding:10px;min-height:30px;_height:30px;font-size:12px;background-color:#fff;} .ui-1024507192 .zext{display:none;} .ui-1024507192.js-zncls-102 .zcls{display:none;}.nbwindow{color:#000;border:1px solid #beb8ab;} #blog-163-com #blog-163-com-layer .nbwindow{/*height:auto;*/min-height:100px;border:1px solid #beb8ab;} .nbwindow .js-hide{display:none;} .nbwindow .zttl{font-size:12px;} .nbwindow .txtclose{position:absolute;top:4px;_top:5px;right:11px;_right:9px;width:10px;height:10px;line-height:10px;} .nbwindow .zcls{right:12px;top:-1px;width:32px;height:18px;line-height:18px;background:#beb8ab url(http://b.bst.126.net/common/nbwindow/close_01.png) no-repeat 0px center;color:#646464;text-indent:1px;_text-indent:2px;} .nbwindow .zclshover{background:#cd3503 url(http://b.bst.126.net/common/nbwindow/close_02.png) no-repeat 0px center;color:#ffe9e1;} .nbwindow .zclsmousedown{background:#ae2601 url(http://b.bst.126.net/common/nbwindow/close_03.png) no-repeat 0px center;color:#ffd9cb;} .nbwindow .ztbr{height:23px;line-height:23px;margin:0 auto;color:#000;background:#e8e8e6 url(http://b.bst.126.net/common/nbwindow/top_bg.png) bottom repeat-x;} .nbwindow .zact{margin:10px 0;text-align:center;} .nbwindow .ztxt{height:1.3em;padding-top:3px;} .nbwindow .zbtnbar{height:31px;line-height:31px;background:#eee;} .nbwindow .zbtn{height:28px;padding:0 8px;font-size:14px;cursor:pointer;} .nbwindow .zbtnok{font-weight:bold;} .nbwindow .zbtncc{margin-left:20px;} #blog-163-com .nbwindow .nbwinwrap .nbwinbtnbar{position:absolute;right:-2px;bottom:0;z-index:101;height:22px;line-height:22px;padding:4px 14px 4px 0;margin:0;border:none;background:none;} #blog-163-com .nbwindow .nbwinwrap .nbwinbtnbar .nbwinbtn{height:22px;padding:0px 10px;margin:0 0 0 10px;line-height:22px;*line-height:20px;font-size:12px;font-weight:normal;cursor:pointer;text-align:center;} #blog-163-com .nbwindow .nbwinwrap .nbwinclear{height:0;padding:0;margin:0;border:none;} #blog-163-com .nbwindow .nbwinwrap .nbwinhide{display:none;} #blog-163-com #blog-163-com-layer .nbwinascard{border:none;} .nbwinascard .zcls{display:none;} .nbwinascard .ztbr{display:none;} .nbwinascard .zcnt{padding:0;background:none;} .nbwinascard .zbtnbar{display:none;} #blog-163-com #blog-163-com-layer .nbwinautoheight{height:auto;} #nbwinNeedScroll{position:absolute;z-index:110;overflow:auto;background:url(http://b.bst.126.net/common/empty.png);} .nbwinzindex{position:relative;z-index:120;} .nbwinzindex .zcse{z-index:120;} #blog-163-com .nbwindow .nbwinwrap .nbwinlogin{width:230px;padding-bottom:5px;} #blog-163-com .nbwindow .nbwinwrap .nbwinlogin .nbwinloginreg{*height:16px;*line-height:16px;*padding-top:6px;} .nbwindow .zext{display:block;position:absolute;} .nbwindow .zext0{left:0;top:-6px;width:100%;height:6px;background:url(http://b.bst.126.net/common/nbwindow/top_bg.png) top repeat-x;} .nbwindow .zext1{left:0;bottom:-6px;width:100%;height:6px;background:url(http://b.bst.126.net/common/nbwindow/bottom_bg.png) bottom repeat-x;} .nbwindow .zext2{left:-6px;top:0;width:6px;height:100%;background:url(http://b.bst.126.net/common/nbwindow/left_bg.png) left repeat-y;} .nbwindow .zext3{right:-6px;top:0;width:6px;height:100%;background:url(http://b.bst.126.net/common/nbwindow/right_bg.png) right repeat-y;} .nbwindow .zext4{left:-6px;top:-6px;width:12px;height:29px;background:url(http://b.bst.126.net/common/nbwindow/left_top.png) no-repeat;} .nbwindow .zext5{right:-6px;top:-6px;width:12px;height:29px;background:url(http://b.bst.126.net/common/nbwindow/right_top.png) no-repeat;} .nbwindow .zext6{left:-6px;bottom:-6px;width:12px;height:37px;background:url(http://b.bst.126.net/common/nbwindow/left_bottom.png) no-repeat;} .nbwindow .zext7{right:-6px;bottom:-6px;width:12px;height:37px;background:url(http://b.bst.126.net/common/nbwindow/right_bottom.png) no-repeat;} .nbwinascard .zext{display:none;} .ui-4906039930{position:relative;zoom:1;text-align:left;} .ui-4906039930-hack{position:absolute;z-index:99;} .ui-4906039930 .zcom{width:200px;border:1px solid #aaa;} .ui-4906039930 .zcse{visibility:hidden;position:absolute;top:20px;left:0;background:#fff;} .ui-4906039930 .zitm{width:100%;height:20px;line-height:20px;cursor:default;} .ui-4906039930 .zitm.js-zhvr-900{background-color:#316ac5;} .ui-4906039930 .zcse .js-login-hovered{background-color:#ddd;color:#fff;}.zibox{position:relative;zoom:1;} .zibox .zitm{float:left;margin:-1px 0 0 -1px;overflow:hidden;text-indent:200px;border:1px solid #e5e5e1;cursor:pointer;background-repeat:no-repeat;zoom:1;} .zibox .zitm:hover,.zibox .js-zhvr-110{position:relative;border-color:#000;}.zibox .zitm.a{width:30px;height:30px;line-height:30px;}.zibox .a0{background-position:-0px -0px;}.zibox .a1{background-position:-30px -0px;}.zibox .a2{background-position:-60px -0px;}.zibox .a3{background-position:-90px -0px;}.zibox .a4{background-position:-120px -0px;}.zibox .a5{background-position:-150px -0px;}.zibox .a6{background-position:-180px -0px;}.zibox .a7{background-position:-210px -0px;}.zibox .a8{background-position:-240px -0px;}.zibox .a9{background-position:-270px -0px;}.zibox .a10{background-position:-0px -30px;}.zibox .a11{background-position:-30px -30px;}.zibox .a12{background-position:-60px -30px;}.zibox .a13{background-position:-90px -30px;}.zibox .a14{background-position:-120px -30px;}.zibox .a15{background-position:-150px -30px;}.zibox .a16{background-position:-180px -30px;}.zibox .a17{background-position:-210px -30px;}.zibox .a18{background-position:-240px -30px;}.zibox .a19{background-position:-270px -30px;}.zibox .a20{background-position:-0px -60px;}.zibox .a21{background-position:-30px -60px;}.zibox .a22{background-position:-60px -60px;}.zibox .a23{background-position:-90px -60px;}.zibox .a24{background-position:-120px -60px;}.zibox .a25{background-position:-150px -60px;}.zibox .a26{background-position:-180px -60px;}.zibox .a27{background-position:-210px -60px;}.zibox .a28{background-position:-240px -60px;}.zibox .a29{background-position:-270px -60px;}.zibox .a30{background-position:-0px -90px;}.zibox .a31{background-position:-30px -90px;}.zibox .a32{background-position:-60px -90px;}.zibox .a33{background-position:-90px -90px;}.zibox .a34{background-position:-120px -90px;}.zibox .a35{background-position:-150px -90px;}.zibox .a36{background-position:-180px -90px;}.zibox .a37{background-position:-210px -90px;}.zibox .a38{background-position:-240px -90px;}.zibox .a39{background-position:-270px -90px;}.zibox .a40{background-position:-0px -120px;}.zibox .a41{background-position:-30px -120px;}.zibox .a42{background-position:-60px -120px;}.zibox .a43{background-position:-90px -120px;}.zibox .a44{background-position:-120px -120px;}.zibox .a45{background-position:-150px -120px;}.zibox .a46{background-position:-180px -120px;}.zibox .a47{background-position:-210px -120px;}.zibox .a48{background-position:-240px -120px;}.zibox .a49{background-position:-270px -120px;}.zibox .a50{background-position:-0px -150px;}.zibox .a51{background-position:-30px -150px;}.zibox .a52{background-position:-60px -150px;}.zibox .a53{background-position:-90px -150px;}.zibox .a54{background-position:-120px -150px;}.zibox .a55{background-position:-150px -150px;}.zibox .a56{background-position:-180px -150px;}.zibox .a57{background-position:-210px -150px;}.zibox .a58{background-position:-240px -150px;}.zibox .a59{background-position:-270px -150px;}.zibox .zitm.b{width:61px;height:60px;line-height:60px;}.zibox .b0{background-position:-0px -0px;}.zibox .b1{background-position:-60px -0px;}.zibox .b2{background-position:-120px -0px;}.zibox .b3{background-position:-180px -0px;}.zibox .b4{background-position:-240px -0px;}.zibox .b5{background-position:-0px -60px;}.zibox .b6{background-position:-60px -60px;}.zibox .b7{background-position:-120px -60px;}.zibox .b8{background-position:-180px -60px;}.zibox .b9{background-position:-240px -60px;}.zibox .b10{background-position:-0px -120px;}.zibox .b11{background-position:-60px -120px;}.zibox .b12{background-position:-120px -120px;}.zibox .b13{background-position:-180px -120px;}.zibox .b14{background-position:-240px -120px;} .zibox .zprv{position:absolute;top:0;left:0;background:#fff no-repeat center center;border:1px solid #888;} .zibox div.zprv{width:60px;height:60px;}.ui-2697294182{width:310px;padding:5px;background:#e5e5e1;border:1px solid #888;} .ui-2697294182 .zibox{height:190px;} .ui-2697294182 .zibox.js-page-0 .zitm{background-image:url(http://b.bst.126.net/common/portrait/face/face-0.png);} .ui-2697294182 .zibox.js-page-1 .zitm{background-image:url(http://b.bst.126.net/common/portrait/face/face-1.png);} .ui-2697294182 .zpgr{line-height:20px;padding:3px;font-size:12px;text-align:right;} .ui-2697294182 .zpgr .ztag{color:#000;cursor:pointer;} .ui-2697294182 .zpgr .zsep{margin:0 3px;} .ui-2697294182 .zpgr .js-zdsab-307{color:#777;cursor:default;}.ui-1534725384{font-size:12px;text-align:left;} .ui-1534725384 .zbrd{border-width:1px;border-style:solid;} .ui-1534725384 .zbgp{background:url(http://b.bst.126.net/common/icon.png) no-repeat;} .ui-1534725384 .zcnt{height:100px;overflow:hidden;} .ui-1534725384 .zcnt iframe,.ui-1534725384 .zcnt textarea{width:100%;height:100%;border:0;} .ui-1534725384 .zcnt textarea{overflow:auto;} .ui-1534725384 .zhnd{cursor:pointer;} .ui-1534725384 .zbtn{position:relative;height:30px;line-height:30px;zoom:1;text-align:right;} .ui-1534725384 .zbok{_margin-top:4px;} .ui-1534725384 .zfce{position:absolute;left:0;top:5px;width:20px;height:20px;cursor:pointer;background-position:0 1px;} .ui-1534725384 .zvcd{position:absolute;top:0;right:80px;} .ui-1534725384 .zvcd *{vertical-align:middle;} .ui-1534725384 .zvcd img{width:40px;height:24px;margin:0 3px;cursor:pointer;} .ui-1534725384 .zvcd span{text-decoration:underline;cursor:pointer;} .ui-1534725384 .zvcd input{width:35px;padding:2px 0;} .ui-1534725384 .zmsg{line-height:20px;} .ui-1534725384 .zmsg .zicn{width:25px;height:20px;background-position:5px -58px;} .ui-1534725384 .zprt{left:0;top:30px;}.ui-6879563321{font-size:12px;padding-bottom:3px;text-align:center;} .ui-6879563321 .frg{display:none;font-weight:bold;} .ui-6879563321 .iblock{height:22px;line-height:22px;padding:1px 8px;margin:0 2px;cursor:pointer;text-decoration:underline;} .ui-6879563321 .pgi:hover,.ui-6879563321 .pgi.js-zhvr-258{padding:0 7px;border-width:1px;border-style:solid;} .ui-6879563321 .pgi.js-zslt-987{padding:1px 8px;border-width:0;background-color:transparent;font-weight:bold;cursor:default;text-decoration:none;} .ui-6879563321 .pgb.js-znpg-097{visibility:hidden;} .ui-6879563321.js-zfrg-6540 .frg{display:none;} .ui-6879563321.js-zfrg-6541 .frg.fgn{display:inline;} .ui-6879563321.js-zfrg-6542 .frg.fgp{display:inline;} .ui-6879563321.js-zfrg-6543 .frg{display:inline;}.lightphotowin{width:450px;height:365px;text-align:left;} .lightphotowin .js-hide{display:none;} .lightphotowin .zcnt{position:relative;z-index:100;padding:0 22px 20px 22px;} .lightphotowin .zbtnbar{display:none;} .lightphotowin .lightphotobox .toparea{height:28px;line-height:28px;padding:14px 0;} .lightphotowin .lightphotobox .uploadarea{position:relative;zoom:1;height:28px;line-height:28px;} .lightphotowin .lightphotobox .uploadfile{position:absolute;left:161px;top:1px;width:58px;height:26px;opacity:0;filter:alpha(opacity=0);overflow:hidden;text-align:left;background:none;} .lightphotowin .lightphotobox .uploadform{height:28px;} .lightphotowin .lightphotobox .uploadform .iptfile{position:absolute;left:-155px;top:-3px;height:30px;cursor:pointer;opacity:0;filter:alpha(opacity=0);} .lightphotowin .lightphotobox .btnupload{width:58px;height:25px;line-height:25px;padding:0;margin-right:22px;background:#ff7700;color:#fff;border:1px solid #bf7331;} .lightphotowin .lightphotobox .tips-fc1{color:#7d7d7d;} .lightphotowin .lightphotobox .error-fc1{color:#990000;} .lightphotowin .lightphotobox .loadingarea{text-align:center;} .lightphotowin .lightphotobox .loading{width:25px;height:25px;line-height:25px;background:url("/common/showhint/loading.gif") no-repeat;} .lightphotowin .lightphotobox .iptttl{width:99%;height:28px;line-height:28px;padding:1px;margin-bottom:10px;} .lightphotowin .lightphotobox .txtarea{width:99%;height:128px;padding:1px;} .lightphotowin .lightphotobox .blogclass{padding:20px 0 15px 0;} .lightphotowin .lightphotobox .selclass{width:180px;padding:1px;} .lightphotowin .lightphotobox .previewarea{padding:20px 0;} .lightphotowin .lightphotobox .imgwrap{width:406px;height:406px;} .lightphotowin .lightphotobox .previmg{display:block;margin:0 auto;border:none;} .lightphotowin .lightphotobox .prevbtm{padding-top:3px;} .lightphotowin .lightphotobox .modify{color:#21759B;} .lightphotowin .lightphotobox .vcdarea{height:22px;line-height:22px;padding-bottom:15px;vertical-align:middle;} .lightphotowin .lightphotobox .valid{width:60px;height:18px;line-height:18px;padding:1px;} .lightphotowin .lightphotobox .valid,.lightphotowin .lightphotobox .vcdimg{height:22px;margin-right:5px;} .lightphotowin .lightphotobox .showfileaddr{width:80px;height:18px;margin-right:16px;} .lightphotowin .lightphotobox .imgname{display:block;width:360px;overflow:hidden;text-overflow:ellipsis;word-break:break-all;} .ui-1946427651{display:none;margin-right:6px;} .ui-1946427651 .miniBlogSetInfo{width:16px;height:16px;} .ui-1946427651 .chkMiniBlogSetInfo{float:left;position:relative;width:16px;height:16px;cursor:pointer;} .ui-1946427651 .chkMiniBlogSetInfo em{position:absolute;top:0;left:0;z-index:3;width:100%;height:100%;overflow:hidden;text-indent:-2000px;background:url("/newpage/images/setting/synminiblog/synicon8.png") -40px -21px no-repeat;} .ui-1946427651 .chkMiniBlogSetInfo b{display:none;position:absolute;bottom:-1px;right:-2px;z-index:5;clear:both;width:8px;height:8px;overflow:hidden;cursor:pointer;background:url("/newpage/images/setting/synminiblog/synicon8.png") 0 -42px no-repeat;} .ui-1946427651 .js-checked em{background-position:-40px 0;} .ui-1946427651 .js-checked b{display:block;} .ui-6232968169{display:none;margin-right:6px;} .ui-6232968169 .miniBlogSetInfo{width:16px;height:16px;} .ui-6232968169 .chkMiniBlogSetInfo{float:left;position:relative;width:16px;height:16px;cursor:pointer;} .ui-6232968169 .chkMiniBlogSetInfo em{position:absolute;top:0;left:0;z-index:3;width:100%;height:100%;overflow:hidden;text-indent:-2000px;background:url("/newpage/images/setting/synminiblog/synicon8.png") -20px -20px no-repeat;} .ui-6232968169 .chkMiniBlogSetInfo b{display:none;position:absolute;bottom:-1px;right:-2px;z-index:5;clear:both;width:8px;height:8px;overflow:hidden;cursor:pointer;background:url("/newpage/images/setting/synminiblog/synicon8.png") 0 -42px no-repeat;} .ui-6232968169 .js-checked em{background-position:-20px 0;} .ui-6232968169 .js-checked b{display:block;} .ui-8500676282{position:relative;float:left;text-align:left;cursor:pointer;} .ui-8500676282,.ui-8500676282 .iblock{height:18px;line-height:18px;} .ui-8500676282 .ztxt{margin-left:5px;} .ui-8500676282 .zdwn{width:18px;text-align:center;} .ui-8500676282 .zlst{visibility:hidden;position:absolute;top:18px;left:-1px;width:100%;max-height:180px;overflow:auto;overflow-x:hidden;} .ui-8500676282 .zlst .zitm{padding:0 5px;height:18px;line-height:18px;cursor:pointer;} .ui-8500676282{font-size:12px;} .ui-8500676282,.ui-8500676282 .zlst{border:1px solid #7f9db9;} .ui-8500676282 .zlst .zitm{background-color:#fff;} .ui-8500676282 .zlst .zitm:hover,.ui-8500676282 .slst .item.js-zhvr-910{color:#fff;background-color:#002080;}.lightwin{width:680px;text-align:left;} .lightwin .zbtnbar{display:none;}.goodnighttip{width:420px;text-align:left;} .goodnighttip .box{height:90px;*height:100px;} .goodnighttip input{position:relative;margin:0 4px 0 0;top:1px;} .goodnighttip .imgwrap{padding-right:10px;margin-right:0px;} .goodnighttip .desc{margin-left:0px;line-height:20px;} .goodnighttip .key{font-size:14px;color:#f60;} .ui-6901066147{margin-right:6px;} .ui-6901066147 .miniBlogSetInfo{width:16px;height:16px;} .ui-6901066147 .chkMiniBlogSetInfo{float:left;position:relative;width:16px;height:16px;cursor:pointer;} .ui-6901066147 .chkMiniBlogSetInfo em{position:absolute;top:0;left:0;z-index:3;width:100%;height:100%;overflow:hidden;text-indent:-2000px;background:url("/newpage/images/setting/synminiblog/synicon8.png") 0 -20px no-repeat;} .ui-6901066147 .chkMiniBlogSetInfo b{display:none;position:absolute;bottom:-1px;right:-2px;z-index:5;clear:both;width:8px;height:8px;overflow:hidden;cursor:pointer;background:url("/newpage/images/setting/synminiblog/synicon8.png") 0 -42px no-repeat;} .ui-6901066147 .js-checked em{background-position:0 0;} .ui-6901066147 .js-checked b{display:block;} .grouprecommendwin{width:355px;text-align:left;} .grouprecommendwin .box{position:relative;max-height:200px;_height:200px;overflow-x:hidden;overflow-y:auto;} .grouprecommendwin ul{overflow:hidden;margin:0;padding:0 0 8px 0;list-style:none;background-color:#FFF;} .grouprecommendwin .selected{background:#ECECEC} .grouprecommendwin li{overflow:hidden;margin:0;padding:0;height:28px;line-height:28px} .grouprecommendwin .groupitem{position:relative;zoom:1;padding-left:0;cursor:pointer;} .grouprecommendwin .groupicon{width:25px;height:20px;line-height:20px;padding:2px 0 2px 5px;} .grouprecommendwin .groupicon img{width:20px;height:20px;padding:0;margin:0;border:none;} .grouprecommendwin .groupname{width:150px;height:28px;line-height:28px;color:#5872a7;} </style></head>
<body onload="prettyPrint()" id="blog-163-com" class="nb-body nb-inr nb-prv">
  <!--[if lte IE 6]><div id="blog-163-com-ie6bodywrap" class=""><![endif]-->
    <!--[if lte IE 6]><div id="blog-163-com-ie6body" class="nb-body"><![endif]-->

<div class="nb-nbar clearfix" id="blog-163-com-topbar">
  <div class="pl fl clearfix">
  <div id="" class="nbw-im fl im im0">
    <a rel="nofollow" class="lbl bd ia noul " href="http://blog.163.com/redirect.html?frompersonalbloghome&url=http://www.163.com/" target="_blank" hidefocus="true"><span class="tx">网易</span><span class="iblock icn0 icn0-421">&nbsp;</span></a><div class="nbw-tcd box-shadow bd">
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&url=http://news.163.com/">
            新闻
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&url=http://t.163.com/">
            微博
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&url=http://email.163.com/">
            邮箱
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&url=http://photo.163.com/">
            相册
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&url=http://yuedu.163.com/">
            阅读
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&url=http://www.youdao.com/">
            有道
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&url=http://photo.163.com/pp/square/">
            摄影
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&url=http://aipai.163.com?from=163blog">
            爱拍
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&url=http://quan.163.com/?from=blogdh">
            优惠券
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&url=http://note.youdao.com/?vendor=163blog">
            云笔记
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&url=http://fm.163.com/?fmblogzx0628">
            闪电邮
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://m.123.163.com/?frombkcp">
            手机邮
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&url=http://yxp.163.com/">
            印像派
          </a>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&url=http://61.163.com/?from=blogxiala">
            网易识字
          </a>
        <div class="sep bd space">&nbsp;</div>
          <a rel="nofollow" target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/redirect.html?frompersonalbloghome&url=http://sitemap.163.com/">
            更多
          </a>
        
    </div>
  </div>

    <span style="display:none;margin-left:0;" class="fl iblock space icn1 icn1-4">&nbsp;</span>

  <div id="" class="nbw-im fl im im10">
    <a class="lbl bd ia noul " href="http://blog.163.com/?frompersonalbloghome" target="_blank" hidefocus="true"><span class="tx">博客</span><span class="iblock icn0 icn0-421">&nbsp;</span></a><div class="nbw-tcd box-shadow bd">
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/services/wapblog.html?frompersonalbloghome">
            手机博客
          </a>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/clone/clone.html?frompersonalbloghome">
            博客搬家
          </a>
          <a target="_blank" class="itm noul youcai " hidefocus="true" href="http://blog.163.com/vip.do?frompersonalbloghome">
            博客VIP服务
          </a>
        <div class="sep bd space">&nbsp;</div>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/blog_admin/blog/static/721279201082863728829/?frompersonalbloghome">
            LiveWriter写博
          </a>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/blog_admin/blog/static/721279201092713253500/?frompersonalbloghome">
            word写博
          </a>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/services/mailblog.html?frompersonalbloghome">
            邮件写博
          </a>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/services/emsblog.html?frompersonalbloghome">
            短信写博
          </a>
        <div class="sep bd space">&nbsp;</div>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/showMultiUser.do?frompersonalbloghome">
            群博客
          </a>
          <a target="_blank" class="itm noul youcai " hidefocus="true" href="http://blog.163.com/BLOG_YOUCAI/">
            博客油菜地
          </a>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/ht/?frompersonalbloghome">
            博客话题
          </a>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/hot/history/?frompersonalbloghome">
            博客热点
          </a>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://q.163.com/#home?frompersonalbloghome">
            博客圈子
          </a>
          <a target="_blank" class="itm noul  " hidefocus="true" href="http://blog.163.com/findFriend.do?type=5?frompersonalbloghome">
            找朋友
          </a>
        
    </div>
  </div>


    <div class="nbw-im fl im1 im explore"><a class="lbl bd ima spy" href="http://blog.163.com/public/explore/?frompersonalbloghome">发现</a></div>
    <div class="nbw-im fl im1 im bloggroup"><a class="lbl bd ima spy" href="http://blog.163.com/g/?frompersonalbloghome">小组</a></div>
    <div class="nbw-im fl im1 im customtheme"><a class="lbl bd ima spy" href="http://blog.163.com/public/theme/?frompersonalbloghome">风格</a></div>
    <div class="nbw-im fl im1 im seebyway"><a rel="nofollow" title="随便看看" class="lbl bd ima spy" href="http://blog.163.com/randomUser.do"><span>&nbsp;</span></a></div>

    <span style="display:none;" class="fl iblock space icn1 icn1-4">&nbsp;</span>
    <div id="topbar_randShowArea" class="fl">
      <div class="nbw-im fl im1 im randtag phide"><a style="width:142px" target="_blank" class="lbl bd ima moveblog randshow" href="http://istyle.163.com/" onclick="window.open(&#39;http://istyle.163.com/?act=idpistyle_20120604_01&#39;);return false;">网易真人搭配社区iStyle</a></div>
      <div class="nbw-im fl im1 im randtag phide"><a style="width:150px" target="_blank" class="lbl bd ima moveblog randshow" href="http://www.lofter.com/app">下载最文艺的手机博客APP&gt;</a></div>
      <div class="nbw-im fl im1 im randtag"><a style="width:150px" target="_blank" class="lbl bd ima moveblog randshow" href="http://www.lofter.com/app">下载最文艺的手机博客APP&gt;</a></div>
    </div>
  </div>
  <div class="fr pr clearfix">
    <div id="topbar_loginAndReg" class="fr">
      <a rel="nofollow" style="margin-left:10px;color:#ff7700;" class="iblock fr ima" href="http://reg.163.com/reg/reg.jsp?product=blog&url=http://blog.163.com/ntesRegBlank.html&loginurl=http://blog.163.com/" target="_blank">创建博客</a>
      <a rel="nofollow" class="iblock fr ima ztag" href="http://blog.163.com/huchengsz@126/blog/static/73483745201181824629285/#">登录</a>
      <span class="fr iblock space icn1 icn1-4 spx">&nbsp;</span>
      <div id="topbar_followArea" class="nbw-im fr"><span class="lbl bd ima followit fl ztag"><span class="fl addicon">&nbsp;</span><span class="fl">加关注</span></span></div>
    </div>
  </div>
</div>
<script type="text/javascript">
  (function(){
      var e = document.getElementById('blog-163-com-main');
      if(!!e) e.parentNode.insertBefore(document.getElementById('blog-163-com-topbar'),e);
      e = document.getElementById('blog-notice-email');
      if(!!e) window.setTimeout(function(){e.style.display='';},50);
  })()
</script>
<div class="blogtoptips phide" id="blog-163-com-toptips">
 <div class="blogtoptipswrap">
    <div id="newbulletinstip" class="newbulletinstip phide">
    <a class="lnknews fc03 m2a tiptag phide" href="" target="_blank"></a><span class="txtnews tiptag phide"></span>&nbsp;&nbsp;&nbsp;<a class="fc03 ul nextorprevnews tiptag phide" href="" hidefocus="true">显示下一条</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a class="fc03 ul close tiptag" href="" hidefocus="true">关闭</a>
  </div>
 </div>
 	<div id="sinaoauthtip" class="sinaoauthtip phide">
    	<span style="">温馨提示！由于新浪微博认证机制调整，您的新浪微博帐号绑定已过期，请重新绑定！</span><a rel="nofollow" class="fc03 noul iblock" href="http://blog.163.com/huchengsz@126/settings/?fromnewcenter#m=6">立即重新绑定新浪微博》</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a class="fc03 iblock close" href="">关闭</a>
  	</div>
    <div id="$_faxiantip" class="faxiantip phide">
      <div>
	    <a class="m2a iblock" href="http://blog.163.com/public/explore/?fromblogbanner" target="_blank"></a>
	    <span class="faxiantag m2a"></span>
      </div>
    </div>
    <div id="$_guanggaotip" class="guanggaotip phide">
      <div>
	    
	    <span class="guanggaotag m2a"></span>
      </div>
    </div>
    <div id="$_lofterInviteTip" class="lofterInviteTip phide">
      <div>
	    <a class="m2a iblock" href="http://www.lofter.com/invite/163blog/?email=" target="_blank"></a>
	    <span class="lofterInviteTag m2a"></span>
      </div>
    </div>
</div>  <div class="nb-wrap wsy" id="blog-163-com-main"><div class="nb-are nb-top">
  <div class="wkg h" id="blog-163-com-banner">
    
    <div class="t">
      <h1 class="n c"><span class="ztag pre">我的博客</span></h1>
      <p class="d c"><span class="ztag pre"></span></p>
    </div>
    <div class="f h ztag">&nbsp;</div>
    <a class="x" hidefocus="true" target="_blank" href="http://blog.163.com/huchengsz@126/blog/static/73483745201181824629285/#"><span class="xx ztag"></span></a>
  </div>
</div><div class="nb-are nb-nav">
  <div class="wkg">
    <div class="c h">
      <h2>导航</h2>
      <ul class="noul clearfix">
                
	        <li class="w w0">
	          <a class="i i0 fc01 h" hidefocus="true" href="http://blog.163.com/huchengsz@126/">首页</a>
	        </li>
	        <li class="w w1 selected">
	          <a class="i i1 fc01 h" hidefocus="true" href="http://blog.163.com/huchengsz@126/blog/">日志</a>
	        </li>
	        <li class="w w2">
	          <a class="i i2 fc01 h" hidefocus="true" href="http://blog.163.com/huchengsz@126/album/">相册</a>
	        </li>
	        <li class="w w3">
	          <a class="i i3 fc01 h" hidefocus="true" href="http://blog.163.com/huchengsz@126/music/">音乐</a>
	        </li>
	        <li class="w w4">
	          <a class="i i4 fc01 h" hidefocus="true" href="http://blog.163.com/huchengsz@126/collection/">收藏</a>
	        </li>
	        <li class="w w5">
	          <a class="i i5 fc01 h" hidefocus="true" href="http://blog.163.com/huchengsz@126/friends/">博友</a>
	        </li>
	        <li class="w w6">
	          <a class="i i6 fc01 h" hidefocus="true" href="http://blog.163.com/huchengsz@126/profile/">关于我</a>
	        </li>
      </ul><!--
 --></div>
    <div class="l h">&nbsp;</div>
    <div class="r h">&nbsp;</div>
  </div>
</div>  <div class="nb-are nb-smt"><div class="wkg h space"><div class="l h">&nbsp;</div><div class="r h">&nbsp;</div><div class="c h">&nbsp;</div></div></div>
  <div class="nb-are nb-cnt">
    <div class="wkg">
      <div class="c wc h clearfix " id="blog-163-com-container">
  <div class="nb-mdl lcr m-3 " id="-3">
  <div class="nb-mt lcr th fc02">
    <div class="c tc th lcr"><h2 class="thide nb-jsc mdl_t_t">日志</h2></div>
    <div class="r tm th nb-jsc"></div>
    <div class="l tl th">&nbsp;</div>
    <div class="r tr th">&nbsp;</div>
  </div>
    <div class="nb-mc lcr">
      <div class="c cc lcr nb-jsc"><script>
function g_onSuggestedReadingImgLoad(_img){
    var image = new Image();
    image.src = _img.src;
    var _width = 90;
    var _height = 90;
    if(image.width > image.height){
    	_img.style.marginLeft = -Math.floor((image.width*(_height/image.height)-_width)/2)+'px';
    	_img.style.height = _height+'px';
    }else {
    	_img.style.width = _width+'px';
    	_img.style.marginTop = -Math.floor((image.height*(_width/image.width)-_height)/2)+'px';
    }
    _img.style.display = 'block';
}
</script>
<div class="nbw-ryt ztag clearfix ">
  <div class="right bdwl bds0 bdc0"><div class="cnt ztag"><div><div class="uinfo ztag">    <a target="_blank" href="http://blog.163.com/huchengsz@126/"><img class="bdwa bdc0 pnt" onerror="this.src=location.f60" src="./Epoll模型详解 - 成的日志 - 网易博客_files/ava.s"></a>    <a target="_blank" class="fc03 m2a" href="http://blog.163.com/huchengsz@126/">成</a>    <div class="intro fc05"></div>        <div class="acts ztag"><span> <span class="iblock icn0 icn0-41">&nbsp;</span> <span class="fc03 ul ztag" onclick="nb.p[&#39;m-3&#39;].g.af(event);">加博友</span> </span><span> <span class="iblock icn0 icn0-016">&nbsp;</span> <span class="fc03 ul tofollow" onclick="nb.p[&#39;m-3&#39;].g.sf(0);">关注他</span> </span></div>      <div class="mbga phide xtag">        <div class="mbgai">&nbsp;</div>        <a class="fc03 xtag m2a" href="http://blog.163.com/huchengsz@126/blog/static/73483745201181824629285/#" target="_blank"></a>      </div>    </div>
    <h4 class="fc07 fs0 ltt phide ztag">被推荐日志</h4>
    <ul class="ztag blst"></ul>
    <h4 class="fc07 fs0 ltt ztag">最新日志</h4>
    <ul class="ztag blst">        <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/huchengsz@126/blog/static/73483745201191415411465/?latestBlog">信号灯</a></li>                <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/huchengsz@126/blog/static/73483745201191210239682/?latestBlog">Linux下通用线程池的创建与</a></li>                <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/huchengsz@126/blog/static/73483745201181832210443/?latestBlog">一个完整的稳定的,单线程的,</a></li>                <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/huchengsz@126/blog/static/73483745201181824629285/?latestBlog">Epoll模型详解</a></li>                <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/huchengsz@126/blog/static/734837452011817113613263/?latestBlog">对于linux&nbsp;socket与epoll配</a></li>                <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/huchengsz@126/blog/static/7348374520118169516291/?latestBlog">Linux信号机制分析</a></li>        </ul>
    <h4 class="fc07 fs0 ltt phide ztag">该作者的其他文章</h4>
    <ul class="ztag blst"></ul>
    <h4 class="fc07 fs0 ltt phide ztag">博主推荐</h4>
    <ul class="ztag blst"></ul>
    <h4 class="fc07 fs0 ltt ztag">随机阅读</h4>
    <ul class="ztag blst">        <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/tzgjbk/blog/static/12669256120132204245582/?personalRecomBlog" title="“红色公主”叶向真">“红色公主”叶向真</a></li>                <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/ellechinacom/blog/static/1138331132013220113429567/?personalRecomBlog" title="同气质美女大PK&#160;你最中意谁">同气质美女大PK&nbsp;你最中意谁</a></li>                <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/lvqiuluwei1510/blog/static/9028525120132202190745/?personalRecomBlog" title="如何看待行贿者？">如何看待行贿者？</a></li>                <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/zhaoxiaoblog/blog/static/44968963201322095942444/?personalRecomBlog" title="“人口红利消失”并不可怕">“人口红利消失”并不可怕</a></li>                <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/xin_lijian/blog/static/46771570201322083842291/?personalRecomBlog" title="广州公办园电脑派位作用几何？">广州公办园电脑派位作用几何？</a></li>                <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/zhu.dake/blog/static/1149602512013220840062/?personalRecomBlog" title="“朱大可守望书系”第三部：《乌托邦》">“朱大可守望书系”第三部：《乌托邦》</a></li>        </ul>
    <h4 class="fc07 fs0 ltt ztag">首页推荐</h4>
    <ul class="ztag blst">        <li class="thide"><a target="_blank" class="fc03 m2a" href="http://gaolong1500.blog.163.com/blog/static/1754330742013619102052603/?recommendReader" title="1940年中共靠种鸦片赚钱">1940年中共靠种鸦片赚钱</a></li>                <li class="thide"><a target="_blank" class="fc03 m2a" href="http://qin.qy.blog.163.com/blog/static/27508745201361704943281/?recommendReader" title="毛时代高干子弟标准装扮">毛时代高干子弟标准装扮</a></li>                <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/ibtimes_cn/blog/static/214534013201361842436942/?recommendReader" title="人肉有多少种标准吃法？">人肉有多少种标准吃法？</a></li>                <li class="thide"><a target="_blank" class="fc03 m2a" href="http://snowheart19.blog.163.com/blog/static/1264682362013618105010471/?recommendReader" title="女性肌肉松软有什么危害">女性肌肉松软有什么危害</a></li>                <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/fangzhouzi_vip/blog/static/10975569420136188500225/?recommendReader" title="方舟子：郎咸平是&#39;贱客&#39;">方舟子：郎咸平是'贱客'</a></li>                <li class="thide"><a target="_blank" class="fc03 m2a" href="http://zgzjcxw.blog.163.com/blog/static/121957107201361891719105/?recommendReader" title="日本战后给美军召慰安妇">日本战后给美军召慰安妇</a></li>        </ul>
    <div class="more"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/">更多&gt;&gt;</a></div>
    <br><br>
    <div id="yodaoad_r" style="display:none;_zoom:1;"></div>
    <div id="lofter_single"><iframe width="140" height="560" style="overflow:hidden;" src="./Epoll模型详解 - 成的日志 - 网易博客_files/mailEntry.htm" frameborder="0"></iframe></div></div></div></div>
  <div class="left">
     <div class="lcnt bdwr bds0 bdc0 ">
      <div id="$_divTopLink" class="top fc03 bdwb bdc0 bds2 clearfix">
        <span class="ilft iblock icn0 icn0-620">&nbsp;</span>
        <div class="pleft thide"><a class="m2a" href="http://blog.163.com/huchengsz@126/blog/static/734837452011817113613263/">对于linux socket与epoll配合相关的一些心得记录</a></div>
        <span class="irgt iblock icn0 icn0-619">&nbsp;</span>
        <div class="pright thide"><a class="m2a" href="http://blog.163.com/huchengsz@126/blog/static/73483745201181832210443/">一个完整的稳定的,单线程的,有正确的收发功能的使用epoll的socket服务程序</a></div>
     </div>
     <div class="mcnt ztag">
      <div class="nbw-bitm bdwb bds2 bdc0 ">
        <div class="multicntwrap">
	      <div class="multicnt">
	      	<div>
		      <h3 class="title pre fs1"><span class="tcnt">Epoll模型详解</span>&nbsp;&nbsp;<span class="bgc0 fc07 fw0 fs0"></span></h3>
		      <p class="tdep clearfix nbw-act fc06" style="line-height:20px;">
		        <span class="pleft">
		          
		          <span class="blogsep">2011-09-18 02:46:29</span><span class="blogsep">|&nbsp;&nbsp;分类：</span>
		          <a class="fc03 m2a" href="http://blog.163.com/huchengsz@126/blog/#m=0&t=1&c=fks_087069085080085068083080081095083085085075087081082070" title="Linux编程">Linux编程</a>
		          <span class="blogsep phide" id="$_blogTagTitle">|&nbsp;&nbsp;标签：</span><span class="fc03 phide" id="$_blogTagInfo"></span>
		        </span>
		        <span class="pright fc07 ztag"><span class="blogsep">|</span><span class="zihao fc03" id="$_fontswitch">字号<span class="zihaoshow  phide" id="$_fontsTypes"><span class="zihaoc bdc0"><span class="stag"></span><span class="fc04 stag">大</span><span class="fc04 stag selected js-fcurrent fc05">中</span><span class="fc04 stag">小</span></span></span></span></span><span class="pright pnt fc03" id="$_blog_subscribe"><span class="iblock icn0 icn0-919">&nbsp;</span><a class="m2a">订阅</a></span>
		      </p>
		    </div>
	      </div>
        </div>

        <div>
        
        </div>

        <div class="nbw-blog-start"></div>
        <div class="bct fc05 fc11 nbw-blog ztag js-fs2"><div><font color="#666666">&nbsp;&nbsp;&nbsp; Linux 2.6内核中提高网络I/O性能的新方法-epoll I/O多路复用技术在比较多的TCP网络服务器中有使用，即比较多的用到select函数。<br><br>1、为什么select落后<br>&nbsp;&nbsp;&nbsp; 首先，在Linux内核中，select所用到的FD_SET是有限的，即内核中有个参数__FD_SETSIZE定义了每个FD_SET的句柄个数，在 我用的2.6.15-25-386内核中，该值是1024，搜索内核源代码得到：<br>include/linux/posix_types.h:<br>#define __FD_SETSIZE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024<br>也就是说，如果想要同时检测1025个句柄的可读状态是不可能用select实现的。或者 同时检测1025个句柄的可写状态也是不可能的。其次，内核中实现 select是用轮询方法，即每次检测都会遍历所有FD_SET中的句柄，显然，select函数执行时间与FD_SET中的句柄个数有一个比例关系，即 select要检测的句柄数越多就会越费时。当然，在前文中我并没有提及poll方法，事实上用select的朋友一定也试过poll，我个人觉得 select和poll大同小异，个人偏好于用select而已。<br><br>2、内核中提高I/O性能的新方法epoll<br>&nbsp;&nbsp;&nbsp; epoll是什么？按照man手册的说法：是为处理大批量句柄而作了改进的poll。要使用epoll只需要这三个系统调 用：epoll_create(2)， epoll_ctl(2)， epoll_wait(2)。<br>当然，这不是2.6内核才有的，它是在 2.5.44内核中被引进的(epoll(4) is a new API introduced in Linux kernel 2.5.44)<br><br>Linux2.6 内核epoll介绍<br>&nbsp;&nbsp;&nbsp; 先介绍2本书《The Linux Networking Architecture--Design and Implementation of Network Protocols in the Linux Kernel》，以2.4内核讲解Linux TCP/IP实现，相当不错.作为一个现实世界中的实现，很多时候你必须作很多权衡，这时候参考一个久经考验的系统更有实际意义。举个例子,linux内 核中sk_buff结构为了追求速度和安全，牺牲了部分内存，所以在发送TCP包的时候，无论应用层数据多大,sk_buff最小也有272的字节.其实 对于socket应用层程序来说，另外一本书《UNIX Network Programming Volume 1》意义更大一点.2003年的时候，这本书出了最新的第3版本，不过主要还是修订第2版本。其中第6章《I/O Multiplexing》是最重要的。Stevens给出了网络IO的基本模型。在这里最重要的莫过于select模型和Asynchronous I/O模型.从理论上说，AIO似乎是最高效的，你的IO操作可以立即返回，然后等待os告诉你IO操作完成。但是一直以来，如何实现就没有一个完美的方 案。最著名的windows完成端口实现的AIO,实际上也是内部用线程池实现的罢了，最后的结果是IO有个线程池，你应用也需要一个线程池...... 很多文档其实已经指出了这带来的线程context-switch带来的代价。在linux 平台上，关于网络AIO一直是改动最多的地方，2.4的年代就有很多AIO内核patch,最著名的应该算是SGI那个。但是一直到2.6内核发布，网络 模块的AIO一直没有进入稳定内核版本(大部分都是使用用户线程模拟方法，在使用了NPTL的linux上面其实和windows的完成端口基本上差不多 了)。2.6内核所支持的AIO特指磁盘的AIO---支持io_submit(),io_getevents()以及对Direct IO的支持(就是绕过VFS系统buffer直接写硬盘，对于流服务器在内存平稳性上有相当帮助)。<br>所以，剩下的select模型基本上就是我们在linux上面的唯一选择，其实，如果加上no-block socket的配置，可以完成一个"伪"AIO的实现，只不过推动力在于你而不是os而已。不过传统的select/poll函数有着一些无法忍受的缺 点，所以改进一直是2.4-2.5开发版本内核的任务，包括/dev/poll，realtime signal等等。最终，Davide Libenzi开发的epoll进入2.6内核成为正式的解决方案<br><br>3、epoll的优点<br>&lt;1&gt;支持一个进程打开大数 目的socket描述符(FD)<br>&nbsp;&nbsp;&nbsp; select 最不能忍受的是一个进程所打开的FD是有一定限制的，由FD_SETSIZE设置，默认值是2048。对于那些需要支持的上万连接数目的IM服务器来说显 然太少了。这时候你一是可以选择修改这个宏然后重新编译内核，不过资料也同时指出这样会带来网络效率的下降，二是可以选择多进程的解决方案(传统的 Apache方案)，不过虽然linux上面创建进程的代价比较小，但仍旧是不可忽视的，加上进程间数据同步远比不上线程间同步的高效，所以也不是一种完 美的方案。不过 epoll则没有这个限制，它所支持的FD上限是最大可以打开文件的数目，这个数字一般远大于2048,举个例子,在1GB内存的机器上大约是10万左 右，具体数目可以cat /proc/sys/fs/file-max察看,一般来说这个数目和系统内存关系很大。<br><br>&lt;2&gt;IO 效率不随FD数目增加而线性下降<br>&nbsp;&nbsp;&nbsp;&nbsp; 传统的select/poll另一个致命弱点就是当你拥有一个很大的socket集合，不过由于网络延时，任一时间只有部分的socket是"活跃"的， 但是select/poll每次调用都会线性扫描全部的集合，导致效率呈现线性下降。但是epoll不存在这个问题，它只会对"活跃"的socket进行 操作---这是因为在内核实现中epoll是根据每个fd上面的callback函数实现的。那么，只有"活跃"的socket才会主动的去调用 callback函数，其他idle状态socket则不会，在这点上，epoll实现了一个"伪"AIO，因为这时候推动力在os内核。在一些 benchmark中，如果所有的socket基本上都是活跃的---比如一个高速LAN环境，epoll并不比select/poll有什么效率，相 反，如果过多使用epoll_ctl,效率相比还有稍微的下降。但是一旦使用idle connections模拟WAN环境,epoll的效率就远在select/poll之上了。<br><br>&lt;3&gt;使用mmap加速内核 与用户空间的消息传递。<br>&nbsp;&nbsp;&nbsp; 这点实际上涉及到epoll的具体实现了。无论是select,poll还是epoll都需要内核把FD消息通知给用户空间，如何避免不必要的内存拷贝就 很重要，在这点上，epoll是通过内核于用户空间mmap同一块内存实现的。而如果你想我一样从2.5内核就关注epoll的话，一定不会忘记手工 mmap这一步的。<br><br>&lt;4&gt;内核微调<br>&nbsp;&nbsp;&nbsp; 这一点其实不算epoll的优点了，而是整个linux平台的优点。也许你可以怀疑 linux平台，但是你无法回避linux平台赋予你微调内核的能力。比如，内核TCP/IP协议栈使用内存池管理sk_buff结构，那么可以在运行时 期动态调整这个内存pool(skb_head_pool)的大小--- 通过echo XXXX&gt;/proc/sys/net/core/hot_list_length完成。再比如listen函数的第2个参数(TCP完成3次握手 的数据包队列长度)，也可以根据你平台内存大小动态调整。更甚至在一个数据包面数目巨大但同时每个数据包本身大小却很小的特殊系统上尝试最新的NAPI网 卡驱动架构。<br><br>4、epoll的工作模式<br>&nbsp;&nbsp;&nbsp; 令人高兴的是，2.6内核的epoll比其2.5开发版本的/dev/epoll简洁了许多，所以，大部分情况下，强大的东西往往是简单的。唯一有点麻烦 是epoll有2种工作方式:LT和ET。<br>LT(level triggered)是缺省的工作方式，并且同时支持block和no-block socket.在这种做法中，内核告诉你一个文件描述符是否就绪了，然后你可以对这个就绪的fd进行IO操作。如果你不作任何操作，内核还是会继续通知你 的，所以，这种模式编程出错误可能性要小一点。传统的select/poll都是这种模型的代表．<br>ET (edge-triggered)是高速工作方式，只支持no-block socket。在这种模式下，当描述符从未就绪变为就绪时，内核通过epoll告诉你。然后它会假设你知道文件描述符已经就绪，并且不会再为那个文件描述 符发送更多的就绪通知，直到你做了某些操作导致那个文件描述符不再为就绪状态了(比如，你在发送，接收或者接收请求，或者发送接收的数据少于一定量时导致 了一个EWOULDBLOCK 错误）。但是请注意，如果一直不对这个fd作IO操作(从而导致它再次变成未就绪)，内核不会发送更多的通知(on<wbr>ly on<wbr>ce),不过在TCP协议中，ET模式的加速效用仍需要更多的benchmark确认。<br>epoll只有epoll_create,epoll_ctl,epoll_wait 3个系统调用，具体用法请参考http://www.xmailserver.org/linux-patches/nio-improve.html ，在http://www.kegel.com/rn/也有一个完整的例子，大家一看就知道如何使用了<br>Leader/follower模式线程 pool实现，以及和epoll的配合。<br><br>5、 epoll的使用方法<br>&nbsp;&nbsp;&nbsp; 首先通过create_epoll(int maxfds)来创建一个epoll的句柄，其中maxfds为你epoll所支持的最大句柄数。这个函数会返回一个新的epoll句柄，之后的所有操作 将通过这个句柄来进行操作。在用完之后，记得用close()来关闭这个创建出来的epoll句柄。之后在你的网络主循环里面，每一帧的调用 epoll_wait(int epfd, epoll_event events, int max events, int timeout)来查询所有的网络接口，看哪一个可以读，哪一个可以写了。基本的语法为：<br>nfds = epoll_wait(kdpfd, events, maxevents, -1);<br>&nbsp;&nbsp;&nbsp; 其中kdpfd为用epoll_create创建之后的句柄，events是一个 epoll_event*的指针，当epoll_wait这个函数操作成功之后，epoll_events里面将储存所有的读写事件。 max_events是当前需要监听的所有socket句柄数。最后一个timeout是 epoll_wait的超时，为0的时候表示马上返回，为-1的时候表示一直等下去，直到有事件范围，为任意正整数的时候表示等这么长的时间，如果一直没 有事件，则范围。一般如果网络主循环是单独的线程的话，可以用-1来等，这样可以保证一些效率，如果是和主逻辑在同一个线程的话，则可以用0来保证主循环 的效率。<br><br></font><br><span><img alt="Epoll模型详解 - 成 - 我的博客" src="./Epoll模型详解 - 成的日志 - 网易博客_files/1384856885418208336.jpg" border="0" small="0"></span><br><font color="#666666">&nbsp;&nbsp;&nbsp; Epoll模型主要负责对大量并发用户的请求进行及时处理，完成服务器与客户端的数据交互。其具体的实现步骤如下：<br>(a) 使用epoll_create()函数创建文件描述，设定将可管理的最大socket描述符数目。<br>(b) 创建与epoll关联的接收线程，应用程序可以创建多个接收线程来处理epoll上的读通知事件，线程的数量依赖于程序的具体需要。<br>(c) 创建一个侦听socket描述符ListenSock；将该描述符设定为非阻塞模式，调用Listen（）函数在套接字上侦听有无新的连接请求，在 epoll_event结构中设置要处理的事件类型EPOLLIN，工作方式为 epoll_ET，以提高工作效率，同时使用epoll_ctl()注册事件，最后启动网络监视线程。<br>(d) 网络监视线程启动循环，epoll_wait()等待epoll事件发生。<br>(e) 如果epoll事件表明有新的连接请求，则调用accept（）函数，将用户socket描述符添加到epoll_da<wbr>ta联合体，同时设定该描述符为非 阻塞，并在epoll_event结构中设置要处理的事件类型为读和写，工作方式为epoll_ET.<br>(f) 如果epoll事件表明socket描述符上有数据可读，则将该socket描述符加入可读队列，通知接收线程读入数据，并将接收到的数据放入到接收数据 的链表中，经逻辑处理后，将反馈的数据包放入到发送数据链表中，等待由发送线程发送。<br></font>  <p></p>  <p></p>  <p></p>  <div style="CLEAR: both;"></div>  <div style="BACKGROUND-COLOR: #f7efe7;">  <div style="BACKGROUND: #fdfdfd; COLOR: black;"><u>C++语言</u>: <a rel="nofollow" href="http://fayaa.com/co%3Cwbr%3Ede/view/11762/"><font color="#1463c4">epoll使用方法1</font></a></div>  <div jquery="15"><span style="COLOR: #808080;">01</span> <span style="COLOR: #808080;">//epoll_wait范围之后应该是一个循环，遍利所有的事件：</span><br><span style="COLOR: #808080;">02</span> <span style="FONT-WEIGHT: bold; COLOR: #008000;">for</span> (n <span style="COLOR: #303030;">=</span> <span style="FONT-WEIGHT: bold; COLOR: #0000d0;">0</span>; n <span style="COLOR: #303030;">&lt;</span> <span style="COLOR: #000000;">nfds</span>; <span style="COLOR: #303030;">++</span>n)<br><span style="COLOR: #808080;">03</span> <span style="COLOR: #000000;">{</span><br><span style="COLOR: #808080;">04</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="FONT-WEIGHT: bold; COLOR: #008000;">if</span> (<span style="COLOR: #000000;">events</span><span style="COLOR: #000000;">[</span>n<span style="COLOR: #000000;">].</span><span style="COLOR: #000000;">da<wbr>ta</span><span style="COLOR: #000000;">.</span><span style="COLOR: #000000;">fd</span> <span style="COLOR: #303030;">==</span> <span style="COLOR: #000000;">listener</span>)<br><span style="COLOR: #f810b0;">05</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">{</span><span style="COLOR: #808080;">//如果是主socket的事件的话，则表示有新连接进入了，进行新连接的处理。</span><br><span style="COLOR: #808080;">06</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">client</span> <span style="COLOR: #303030;">=</span> <span style="COLOR: #000000;">accept</span> (<span style="COLOR: #000000;">listener</span><span style="COLOR: #000000;">,</span> (<span style="FONT-WEIGHT: bold; COLOR: #008000;">struct</span> <span style="COLOR: #000000;">sockaddr</span> <span style="COLOR: #303030;">*</span>) <span style="COLOR: #303030;">&amp;</span><span style="COLOR: #000000;">local</span><span style="COLOR: #000000;">,</span> <span style="COLOR: #303030;">&amp;</span><span style="COLOR: #000000;">addrlen</span>);<br><span style="COLOR: #808080;">07</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="FONT-WEIGHT: bold; COLOR: #008000;">if</span> (<span style="COLOR: #000000;">client</span> <span style="COLOR: #303030;">&lt;</span> <span style="FONT-WEIGHT: bold; COLOR: #0000d0;">0</span>)<br><span style="COLOR: #808080;">08</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">{</span><br><span style="COLOR: #808080;">09</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">perror</span> (<span style="BACKGROUND-COLOR: #fff0f0;">"accept"</span>);<br><span style="COLOR: #f810b0;">10</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="FONT-WEIGHT: bold; COLOR: #008000;">continue</span>;<br><span style="COLOR: #808080;">11</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">}</span><br><span style="COLOR: #808080;">12</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">setnonblocking</span> (<span style="COLOR: #000000;">client</span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #808080;">// 将新连接置于非阻塞模式</span><br><span style="COLOR: #808080;">13</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">ev</span><span style="COLOR: #000000;">.</span><span style="COLOR: #000000;">events</span> <span style="COLOR: #303030;">=</span> <span style="COLOR: #000000;">EPOLLIN</span> | <span style="COLOR: #000000;">EPOLLET</span>; <span style="COLOR: #808080;">// 并且将新连接也加入EPOLL的监听队列。</span><br><span style="COLOR: #808080;">14</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #808080;">//注意，这里的参数EPOLLIN | EPOLLET并没有设置对写socket的监听，</span><br><span style="COLOR: #f810b0;">15</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #808080;">//如果有写操作的话，这个时候epoll是不会返回事件的，</span><br><span style="COLOR: #808080;">16</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #808080;">//如果要对写操作也监听的话，应该是EPOLLIN | EPOLLOUT | EPOLLET</span><br><span style="COLOR: #808080;">17</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">ev</span><span style="COLOR: #000000;">.</span><span style="COLOR: #000000;">da<wbr>ta</span><span style="COLOR: #000000;">.</span><span style="COLOR: #000000;">fd</span> <span style="COLOR: #303030;">=</span> <span style="COLOR: #000000;">client</span>;<br><span style="COLOR: #808080;">18</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="FONT-WEIGHT: bold; COLOR: #008000;">if</span> (<span style="COLOR: #000000;">epoll_ctl</span> (<span style="COLOR: #000000;">kdpfd</span><span style="COLOR: #000000;">,</span> <span style="COLOR: #000000;">EPOLL_CTL_ADD</span><span style="COLOR: #000000;">,</span> <span style="COLOR: #000000;">client</span><span style="COLOR: #000000;">,</span> <span style="COLOR: #303030;">&amp;</span><span style="COLOR: #000000;">ev</span>) <span style="COLOR: #303030;">&lt;</span> <span style="FONT-WEIGHT: bold; COLOR: #0000d0;">0</span>)<br><span style="COLOR: #808080;">19</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">{</span><br><span style="COLOR: #f810b0;">20</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #808080;">/*</span><br><span style="COLOR: #808080;">21</span> <span style="COLOR: #808080;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 设置好event之后，将这个新的event通过epoll_ctl加入到epoll的监听队列里面，</span><br><span style="COLOR: #808080;">22</span> <span style="COLOR: #808080;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 这里用EPOLL_CTL_ADD来加一个新的epoll事件,通过EPOLL_CTL_DEL来减少一个epoll事件，通</span><br><span style="COLOR: #808080;">23</span> <span style="COLOR: #808080;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 过EPOLL_CTL_MOD来改变一个事件的监听方式.</span><br><span style="COLOR: #808080;">24</span> <span style="COLOR: #808080;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; */</span><br><span style="COLOR: #f810b0;">25</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">fprintf</span> (<span style="COLOR: #000000;">stderr</span><span style="COLOR: #000000;">,</span> <span style="BACKGROUND-COLOR: #fff0f0;">"epoll set insertion error: fd=%d"</span><span style="COLOR: #000000;">,</span> <span style="COLOR: #000000;">client</span>);<br><span style="COLOR: #808080;">26</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="FONT-WEIGHT: bold; COLOR: #008000;">return</span> <span style="COLOR: #303030;">-</span><span style="FONT-WEIGHT: bold; COLOR: #0000d0;">1</span>;<br><span style="COLOR: #808080;">27</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">}</span><br><span style="COLOR: #808080;">28</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">}</span><br><span style="COLOR: #808080;">29</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="FONT-WEIGHT: bold; COLOR: #008000;">else</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #808080;">// 如果不是主socket的事件的话，则代表是一个用户socket的事件，</span><br><span style="COLOR: #f810b0;">30</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">do_use_fd</span> (<span style="COLOR: #000000;">events</span><span style="COLOR: #000000;">[</span>n<span style="COLOR: #000000;">].</span><span style="COLOR: #000000;">da<wbr>ta</span><span style="COLOR: #000000;">.</span><span style="COLOR: #000000;">fd</span>); <span style="COLOR: #808080;">//则来处理这个用户socket的事情，比如说read(fd,xxx)之类的，或者一些其他的处理。</span><br><span style="COLOR: #808080;">31</span> <span style="COLOR: #000000;">}</span></div></div><br>&nbsp;&nbsp;&nbsp; 对，epoll的操作就这么简单，总共不过4个 API：epoll_create, epoll_ctl, epoll_wait和close。<br>如果您对epoll的效率还不太了解，请参考我 之前关于网络游戏的网络编程等相关的文章。<br><br>&nbsp;&nbsp;&nbsp; 以前公司的服务器都是使用HTTP连接，但是这样的话，在手机目前的网络情况下不但显得速度较慢，而且不稳定。因此大家一致同意用 SOCKET来进行连接。虽然使用SOCKET之后，对于用户的费用可能会增加(由于是用了CMNET而非CMWAP)，但是，秉着用户体验至上的原则， 相信大家还是能够接受的(希望那些玩家月末收到帐单不后能够保持克制...)。<br>这次的服务器设计中，最重要的一个突破，是使用了EPOLL模型， 虽然对之也是一知半解，但是既然在各大PC网游中已经经过了如此严酷的考验，相信他不会让我们失望，使用后的结果，确实也是表现相当不错。在这里，我还是 主要大致介绍一下这个模型的结构。<br>6、Linux下EPOll编程实例<br>EPOLL模型似乎只有一种格式，所以大家只要参考我下面的代码， 就能够对EPOLL有所了解了，代码的解释都已经在注释中：<br><br>  <div style="CLEAR: both;"></div>  <div style="BACKGROUND-COLOR: #f7efe7;">  <div style="BACKGROUND: #fdfdfd; COLOR: black;"><u>C++语言</u>: <a rel="nofollow" href="http://fayaa.com/co%3Cwbr%3Ede/view/11763/"><font color="#1463c4">Codee#11763</font></a></div>  <div jquery="15"><span style="COLOR: #808080;">01</span> <span style="FONT-WEIGHT: bold; COLOR: #008000;">while</span> (<span style="COLOR: #000000;">TRUE</span>)<br><span style="COLOR: #808080;">02</span> <span style="COLOR: #000000;">{</span><br><span style="COLOR: #808080;">03</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="FONT-WEIGHT: bold; COLOR: #303090;">int</span> <span style="COLOR: #000000;">nfds</span> <span style="COLOR: #303030;">=</span> <span style="COLOR: #000000;">epoll_wait</span> (<span style="COLOR: #000000;">m_epoll_fd</span><span style="COLOR: #000000;">,</span> <span style="COLOR: #000000;">m_events</span><span style="COLOR: #000000;">,</span> <span style="COLOR: #000000;">MAX_EVENTS</span><span style="COLOR: #000000;">,</span> <span style="COLOR: #000000;">EPOLL_TIME_OUT</span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #808080;">//等待EPOLL时间的发生，相当于监听，</span><br><span style="COLOR: #808080;">04</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #808080;">//至于相关的端口，需要在初始化EPOLL的时候绑定。</span><br><span style="COLOR: #f810b0;">05</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="FONT-WEIGHT: bold; COLOR: #008000;">if</span> (<span style="COLOR: #000000;">nfds</span> <span style="COLOR: #303030;">&lt;=</span> <span style="FONT-WEIGHT: bold; COLOR: #0000d0;">0</span>)<br><span style="COLOR: #808080;">06</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="FONT-WEIGHT: bold; COLOR: #008000;">continue</span>;<br><span style="COLOR: #808080;">07</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">m_bOnTimeChecking</span> <span style="COLOR: #303030;">=</span> <span style="COLOR: #000000;">FALSE</span>;<br><span style="COLOR: #808080;">08</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">G_CurTime</span> <span style="COLOR: #303030;">=</span> <span style="COLOR: #000000;">time</span> (<span style="COLOR: #007020;">NULL</span>);<br><span style="COLOR: #808080;">09</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="FONT-WEIGHT: bold; COLOR: #008000;">for</span> (<span style="FONT-WEIGHT: bold; COLOR: #303090;">int</span> <span style="COLOR: #000000;">i</span> <span style="COLOR: #303030;">=</span> <span style="FONT-WEIGHT: bold; COLOR: #0000d0;">0</span>; <span style="COLOR: #000000;">i</span> <span style="COLOR: #303030;">&lt;</span> <span style="COLOR: #000000;">nfds</span>; <span style="COLOR: #000000;">i</span><span style="COLOR: #303030;">++</span>)<br><span style="COLOR: #f810b0;">10</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">{</span><br><span style="COLOR: #808080;">11</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="FONT-WEIGHT: bold; COLOR: #008000;">try</span><br><span style="COLOR: #808080;">12</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">{</span><br><span style="COLOR: #808080;">13</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="FONT-WEIGHT: bold; COLOR: #008000;">if</span> (<span style="COLOR: #000000;">m_events</span><span style="COLOR: #000000;">[</span><span style="COLOR: #000000;">i</span><span style="COLOR: #000000;">].</span><span style="COLOR: #000000;">da<wbr>ta</span><span style="COLOR: #000000;">.</span><span style="COLOR: #000000;">fd</span> <span style="COLOR: #303030;">==</span> <span style="COLOR: #000000;">m_listen_http_fd</span>)&nbsp;&nbsp;&nbsp; <span style="COLOR: #808080;">//如果新监测到一个HTTP用户连接到绑定的HTTP端口，</span><br><span style="COLOR: #808080;">14</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #808080;">//建立新的连接。由于我们新采用了SOCKET连接，所以基本没用。</span><br><span style="COLOR: #f810b0;">15</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">{</span><br><span style="COLOR: #808080;">16</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">On<wbr>AcceptHttpEpoll</span> ();<br><span style="COLOR: #808080;">17</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">}</span><br><span style="COLOR: #808080;">18</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="FONT-WEIGHT: bold; COLOR: #008000;">else</span> <span style="FONT-WEIGHT: bold; COLOR: #008000;">if</span> (<span style="COLOR: #000000;">m_events</span><span style="COLOR: #000000;">[</span><span style="COLOR: #000000;">i</span><span style="COLOR: #000000;">].</span><span style="COLOR: #000000;">da<wbr>ta</span><span style="COLOR: #000000;">.</span><span style="COLOR: #000000;">fd</span> <span style="COLOR: #303030;">==</span> <span style="COLOR: #000000;">m_listen_sock_fd</span>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #808080;">//如果新监测到一个SOCKET用户连接到了绑定的SOCKET端口，</span><br><span style="COLOR: #808080;">19</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #808080;">//建立新的连接。</span><br><span style="COLOR: #f810b0;">20</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">{</span><br><span style="COLOR: #808080;">21</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">On<wbr>AcceptSockEpoll</span> ();<br><span style="COLOR: #808080;">22</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">}</span><br><span style="COLOR: #808080;">23</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="FONT-WEIGHT: bold; COLOR: #008000;">else</span> <span style="FONT-WEIGHT: bold; COLOR: #008000;">if</span> (<span style="COLOR: #000000;">m_events</span><span style="COLOR: #000000;">[</span><span style="COLOR: #000000;">i</span><span style="COLOR: #000000;">].</span><span style="COLOR: #000000;">events</span> <span style="COLOR: #303030;">&amp;</span> <span style="COLOR: #000000;">EPOLLIN</span>) <span style="COLOR: #808080;">//如果是已经连接的用户，并且收到数据，那么进行读入。</span><br><span style="COLOR: #808080;">24</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">{</span><br><span style="COLOR: #f810b0;">25</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">On<wbr>ReadEpoll</span> (<span style="COLOR: #000000;">i</span>);<br><span style="COLOR: #808080;">26</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">}</span><br><span style="COLOR: #808080;">27</span> <br><span style="COLOR: #808080;">28</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">On<wbr>WriteEpoll</span> (<span style="COLOR: #000000;">i</span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #808080;">//查看当前的活动连接是否有需要写出的数据。</span><br><span style="COLOR: #808080;">29</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">}</span><br><span style="COLOR: #f810b0;">30</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="FONT-WEIGHT: bold; COLOR: #008000;">catch</span> (<span style="FONT-WEIGHT: bold; COLOR: #303090;">int</span>)<br><span style="COLOR: #808080;">31</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">{</span><br><span style="COLOR: #808080;">32</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">PRINTF</span> (<span style="BACKGROUND-COLOR: #fff0f0;">"CATCH捕获错误</span><span style="FONT-WEIGHT: bold; COLOR: #606060; BACKGROUND-COLOR: #fff0f0;">\n</span><span style="BACKGROUND-COLOR: #fff0f0;">"</span>);<br><span style="COLOR: #808080;">33</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="FONT-WEIGHT: bold; COLOR: #008000;">continue</span>;<br><span style="COLOR: #808080;">34</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">}</span><br><span style="COLOR: #f810b0;">35</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">}</span><br><span style="COLOR: #808080;">36</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">m_bOnTimeChecking</span> <span style="COLOR: #303030;">=</span> <span style="COLOR: #000000;">TRUE</span>;<br><span style="COLOR: #808080;">37</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #000000;">On<wbr>Timer</span> ();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: #808080;">//进行一些定时的操作，主要就是删除一些短线用户等。</span><br><span style="COLOR: #808080;">38</span> <span style="COLOR: #000000;">}</span></div></div>&nbsp;&nbsp;&nbsp; 其实EPOLL的精华，也就是上述的几段短短的代码，看来时代真的不同了，以前如何接受大量用户连接的问题，现在却被如此轻松的搞定，真是让人不得不感 叹，对哪。</div></div>
        <div class="nbw-blog-end"></div>

        <div>
		</div>

        <div>
		</div>

		<div>
      	  <div>
		  	<div class="wumii-hook"></div><script type="text/javascript" id="wumiiRelatedItems"></script>
		  </div>
		</div>

        <div class="ptc phide ztag">
          <span class="ptcp">
            <span class="iblock bcmimg">&nbsp;</span>
            <span class="nbc-0 nbc-0-40 ptcmt ptcmt-2">评论这张</span>
          </span>
        </div>
		<div class="ptc phide ztag">
          <span class="ptcp">
            <span class="nbc-0 nbc-0-40 ptcmi">
              <img src="./Epoll模型详解 - 成的日志 - 网易博客_files/microblog.png">
            </span>
            <span class="nbc-0 nbc-0-40 ptcmt">转发至微博</span>
          </span>
        </div>
        <div class="ptc phide ztag">
          <span class="ptcp">
            <span class="nbc-0 nbc-0-40 ptcmi">
              <img src="./Epoll模型详解 - 成的日志 - 网易博客_files/microblog.png">
            </span>
            <span class="nbc-0 nbc-0-40 ptcmt">转发至微博</span>
          </span>
        </div>


        <div class="nbw-act tbar fc03 clearfix">
         <div style="height:24px;line-height:24px;">
          <div class="pleft rdif">
	          <span class="pnt pleft" id="$_spanRecommend"><img class="pclass" src="./Epoll模型详解 - 成的日志 - 网易博客_files/tuijian.png"></span>
	        <span id="$_spanShowRecommend" class="pleft rdct ">
	          <span class="pleft ul fc03"><span id="$_spanRecommendCount">1</span>人</span><span class="pleft iblock icn0 icn0-722 nbw-tgl1 nas-icn0fix">&nbsp;</span><span class="pleft iblock icn0 icn0-621 nbw-tgl0 nas-icn0fix">&nbsp;</span><span class="fc07"></span>|&nbsp;
	        </span>
	         <span class="fc07 pleft nas-tofix">分享到：</span><span class="nas-wrap pleft"><span id="$_shareBtn_163weibo" title="分享到网易微博" class="nas-itm nas-itm0">&nbsp;</span><span id="$_shareBtn_sinaweibo" title="分享到新浪微博" class="nas-itm nas-itm6">&nbsp;</span><span id="$_shareBtn_qqweibo" title="分享到腾讯微博" class="nas-itm nas-itm9">&nbsp;</span><span class="nas-itm nas-itm7" title="分享到MSN" id="$_shareBtn_msn">&nbsp;</span><span class="nas-itm nas-itm3" title="分享到QQ空间" id="$_shareBtn_qq">&nbsp;</span><span class="nas-itm nas-itm1" title="分享到人人网" id="$_shareBtn_renren">&nbsp;</span><span class="nas-itm nas-itm2" title="分享到开心网" id="$_shareBtn_kaixin">&nbsp;</span><span class="nas-itm nas-itm4" title="分享到豆瓣" id="$_shareBtn_douban">&nbsp;</span></span>
          </div>
          <div class="pright">
              <span class="fc07">阅读(<span id="$_spaniReadCount">1909</span>)</span><span class="sep fc07">|</span>
              <span class="fc07">评论(<span id="$_spaniCommentCount">4</span>)</span><span class="sep fc07">|</span>
              <span class="m2a" id="$_spanCite">转载</span> <span class="m2a" id="$_spanCiteCount">(6)</span>
              <span class="sep fc07">|</span><span id="$_spanReport" class="m2a">举报</span>
          </div>
         </div>
        </div>
      </div>
      <div class="snl">
        <div class="phide bdwb bds2 bdc0 rdcnt" id="$_divRecommendContent"></div>
        <div id="yodaoad" class="bdwb bds2 bdc0" style="display:none;_zoom:1;">&nbsp;</div>
        <div id="$_divTopLink" class="top fc03 clearfix">
	        <span class="ilft iblock icn0 icn0-620">&nbsp;</span>
	        <div class="pleft thide"><a class="m2a" href="http://blog.163.com/huchengsz@126/blog/static/734837452011817113613263/">对于linux socket与epoll配合相关的一些心得记录</a></div>
	        <span class="irgt iblock icn0 icn0-619">&nbsp;</span>
	        <div class="pright thide"><a class="m2a" href="http://blog.163.com/huchengsz@126/blog/static/73483745201181832210443/">一个完整的稳定的,单线程的,有正确的收发功能的使用epoll的socket服务程序</a></div>
	     </div>
	    <div class="relateblog">
          <h4 class="bdwb bds2 bdc0 fc07 fs0">历史上的今天</h4>
          <div class="cnt ztag clearfix"><ul>                          <li class="thide fc03">          <a class="m2a" target="_blank" href="http://blog.163.com/huchengsz@126/blog/static/7348374520098186314570" title="sdk编程详解，转自互联网">sdk编程详解，转自互联网</a><span class="fc07">2009-09-18 18:31:04</span>        </li>                                <li class="thide fc03">          <a class="m2a" target="_blank" href="http://blog.163.com/huchengsz@126/blog/static/73483745200981841952887" title="有用的正则验证，转自互联网">有用的正则验证，转自互联网</a><span class="fc07">2009-09-18 16:19:52</span>        </li>                </ul></div>
        </div>
	    <div class="author">
	      <h4 class="bdwb bds2 bdc0 fc07 fs0">最近读者</h4>
	      <div class="cnt ztag clearfix"><div class="pleft nlogif clearfix"> <div class="pleft nbw-f50 nbw-fce"><img class="cwd pnt" onerror="this.src=location.f60" src="./Epoll模型详解 - 成的日志 - 网易博客_files/face60.png"></div> <div class="m2a pright fc03"><span class="ul">登录</span>后，您可以在此留下足迹。</div> </div>        <div class="iblock nbw-fce nbw-f40">      <a class="fc03 noul" target="_blank" hidefocus="true" href="http://blog.163.com/wandabing@126/">            <img alt="wandabing@126" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="./Epoll模型详解 - 成的日志 - 网易博客_files/ava(1).s">            </a>      <div class="cwd vname thide">                <a class="fc03 m2a" target="_blank" hidefocus="true" href="http://blog.163.com/wandabing@126/">          wandabin        </a>      </div>    </div>                <div class="iblock nbw-fce nbw-f40">      <a class="fc03 noul" target="_blank" hidefocus="true" href="http://blog.163.com/zgliuhuacheng/">            <img alt="zgliuhuacheng" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="./Epoll模型详解 - 成的日志 - 网易博客_files/ava(2).s">            </a>      <div class="cwd vname thide">                <a class="fc03 m2a" target="_blank" hidefocus="true" href="http://blog.163.com/zgliuhuacheng/">          zgliuhua        </a>      </div>    </div>                <div class="iblock nbw-fce nbw-f40">      <a class="fc03 noul" target="_blank" hidefocus="true" href="http://blog.163.com/wxk1986815/">            <img alt="wxk1986815" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="./Epoll模型详解 - 成的日志 - 网易博客_files/ava(3).s">            </a>      <div class="cwd vname thide">                <a class="fc03 m2a" target="_blank" hidefocus="true" href="http://blog.163.com/wxk1986815/">          wxk19868        </a>      </div>    </div>                <div class="iblock nbw-fce nbw-f40">      <a class="fc03 noul" target="_blank" hidefocus="true" href="http://blog.163.com/chenmengbj/">            <img alt="chenmengbj" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="./Epoll模型详解 - 成的日志 - 网易博客_files/ava(4).s">            </a>      <div class="cwd vname thide">                <a class="fc03 m2a" target="_blank" hidefocus="true" href="http://blog.163.com/chenmengbj/">          chenmeng        </a>      </div>    </div>                <div class="iblock nbw-fce nbw-f40">      <a class="fc03 noul" target="_blank" hidefocus="true" href="http://blog.163.com/tongxu1/">            <img alt="欢乐时光" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="./Epoll模型详解 - 成的日志 - 网易博客_files/ava(5).s">            </a>      <div class="cwd vname thide">                <a class="fc03 m2a" target="_blank" hidefocus="true" href="http://blog.163.com/tongxu1/">          欢乐时光        </a>      </div>    </div>                <div class="iblock nbw-fce nbw-f40">      <a class="fc03 noul" target="_blank" hidefocus="true" href="http://blog.163.com/jiangp84@126/">            <img alt="jiangp84@126" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="./Epoll模型详解 - 成的日志 - 网易博客_files/ava(6).s">            </a>      <div class="cwd vname thide">                <a class="fc03 m2a" target="_blank" hidefocus="true" href="http://blog.163.com/jiangp84@126/">          jiangp84        </a>      </div>    </div>                <div class="iblock nbw-fce nbw-f40">      <a class="fc03 noul" target="_blank" hidefocus="true" href="http://blog.163.com/mq0427/">            <img alt="mq0427" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="./Epoll模型详解 - 成的日志 - 网易博客_files/ava(7).s">            </a>      <div class="cwd vname thide">                <a class="fc03 m2a" target="_blank" hidefocus="true" href="http://blog.163.com/mq0427/">          mq0427        </a>      </div>    </div>                <div class="iblock nbw-fce nbw-f40">      <a class="fc03 noul" target="_blank" hidefocus="true" href="http://blog.163.com/harkhuang/">            <img alt="hark.huang" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="./Epoll模型详解 - 成的日志 - 网易博客_files/ava(8).s">            </a>      <div class="cwd vname thide">                <a class="fc03 m2a" target="_blank" hidefocus="true" href="http://blog.163.com/harkhuang/">          hark.hua        </a>      </div>    </div>        </div>
	    </div>
	    <div class="phide" id="yodaoad_1" style="_zoom:1;"></div>
	    <div class="comment">
	      <h4 class="bdwb bds2 bdc0 fc07 fs0">评论</h4>
	      <a name="blogComment" id="blogComment"></a>
	      <div class="ztag"><div>    <div class="publish ztag"><div class="nbw-cdt edt-cmt"><div class="nbw-act tp"> <span class="m2a fc03 ztag">点击登录</span><span class="sep">|</span><span class="fc05">昵称：</span><input maxlength="18" class="znick bdwa bds0 bdc0 ztag" type="text"> </div> <div class="edt ztag"><div class="ui-1534725384"><div class="zcnt ztag zbrd bdc0"><iframe frameborder="0" src="./Epoll模型详解 - 成的日志 - 网易博客_files/Epoll模型详解 - 成的日志 - 网易博客.htm"></iframe></div> <div class="zbtn"> <span class="zfce zbgp ztag space">&nbsp;</span> <input class="zbok zhnd ztag nbtn fc09 bdc1 bgc2" type="button" value="发表"> <span class="zbcc zhnd ztag fc04">取消</span> <div class="zvcd ztag" style="display: none;"> <label>验证码：</label><input class="zbrd xtag bdc0" type="text" maxlength="4"><img class="xtag" title="点击刷新验证码" src="./Epoll模型详解 - 成的日志 - 网易博客_files/empty.png"><span class="xtag fc04">换一张</span> </div> </div> <div class="zmsg fc07" style="display:none;"><span class="zicn zbgp iblock">&nbsp;</span><span class="ztag"></span></div></div></div> <div class="hnt thide ztag" style="display: none;"></div></div></div>
    <div class="bdwt bds2 bdc0 phide" id="yodaoad_2" style="_zoom:1;"></div>
    <div class="ztag bdwt bds2 bdc0">
      <div class="case"><div class="nbw-cmt bdwb bds2 bdc0 clearfix"> <div class="nbw-fce nbw-f50 pleft"> <a target="_blank" hidefocus="true" href="http://123hejiejie.blog.163.com/"><img class="cwd atag" src="./Epoll模型详解 - 成的日志 - 网易博客_files/ava(9).s"></a> </div> <div class="thde"> <div class="tt"><span class="pright fc07 atag">07-06 11:20</span><div class="tx atag"><a title="123hejiejie" class="fc03 noul" target="_blank" href="http://123hejiejie.blog.163.com/"><span class="m2a">123hejiejie</span></a></div></div> <div class="cnt pre atag">关于IO多路复用技术epoll，讲的挺好。
</div> <div class="op fc03 nbw-act atag"><span class="m2a">回复</span></div> <div class="reps atag" style="display: none;"></div> <div class="cover"></div> </div> </div><div class="nbw-cmt bdwb bds2 bdc0 clearfix"> <div class="nbw-fce nbw-f50 pleft"> <a target="_blank" hidefocus="true" href="http://123hejiejie.blog.163.com/"><img class="cwd atag" src="./Epoll模型详解 - 成的日志 - 网易博客_files/ava(9).s"></a> </div> <div class="thde"> <div class="tt"><span class="pright fc07 atag">07-06 11:19</span><div class="tx atag"><a title="123hejiejie" class="fc03 noul" target="_blank" href="http://123hejiejie.blog.163.com/"><span class="m2a">123hejiejie</span></a></div></div> <div class="cnt pre atag">来学习了，谢谢楼主的总结。</div> <div class="op fc03 nbw-act atag"><span class="m2a">回复</span></div> <div class="reps atag" style="display: none;"></div> <div class="cover"></div> </div> </div><div class="nbw-cmt bdwb bds2 bdc0 clearfix"> <div class="nbw-fce nbw-f50 pleft"> <a target="_blank" hidefocus="true" href="http://softdream.blog.163.com/"><img class="cwd atag" src="./Epoll模型详解 - 成的日志 - 网易博客_files/ava(10).s"></a> </div> <div class="thde"> <div class="tt"><span class="pright fc07 atag">05-16 14:13</span><div class="tx atag"><a title="embedded" class="fc03 noul" target="_blank" href="http://softdream.blog.163.com/"><span class="m2a">embedded</span></a></div></div> <div class="cnt pre atag">挺深奥的，学习了<br><br></div> <div class="op fc03 nbw-act atag"><span class="m2a">回复</span></div> <div class="reps atag" style="display: none;"></div> <div class="cover"></div> </div> </div><div class="nbw-cmt bdwb bds2 bdc0 clearfix"> <div class="nbw-fce nbw-f50 pleft"> <a target="_blank" hidefocus="true"><img class="cwd atag" src="./Epoll模型详解 - 成的日志 - 网易博客_files/face60.png" title="北京 "></a> </div> <div class="thde"> <div class="tt"><span class="pright fc07 atag">03-29 17:39</span><div class="tx atag"><span title="北京 " class="fc07">初级C++程序员</span></div></div> <div class="cnt pre atag">跟大师学习了= =</div> <div class="op fc03 nbw-act atag"><span class="m2a">回复</span></div> <div class="reps atag" style="display: none;"></div> <div class="cover"></div> </div> </div></div>
      <div class="clearfix" style=""><div class="ui-6879563321 noselect js-zfrg-6540" style="display: none;"><span class="pgi pgb iblock fc03 bgc9 bdc0 js-znpg-097">上一页</span> <span class="pgi zpg1 iblock fc03 bgc9 bdc0 js-zslt-987 fc05">1</span> <span class="frg fgp fc06">...</span> <span class="pgi zpg2 iblock fc03 bgc9 bdc0" style="display: none;">-1</span> <span class="pgi zpg3 iblock fc03 bgc9 bdc0" style="display: none;">-1</span> <span class="pgi zpg4 iblock fc03 bgc9 bdc0" style="display: none;">-1</span> <span class="pgi zpg5 iblock fc03 bgc9 bdc0" style="display: none;">-1</span> <span class="pgi zpg6 iblock fc03 bgc9 bdc0" style="display: none;">-1</span> <span class="pgi zpg7 iblock fc03 bgc9 bdc0" style="display: none;">-1</span> <span class="pgi zpg8 iblock fc03 bgc9 bdc0" style="display: none;">-1</span> <span class="frg fgn fc06">...</span> <span class="pgi zpg9 iblock fc03 bgc9 bdc0" style="display: none;">-1</span> <span class="pgi pgb iblock fc03 bgc9 bdc0 js-znpg-097">下一页</span></div></div>
    </div>
  </div></div>
	    </div>
	    <div class="phide" id="yodaoad_3" style="_zoom:1;"></div>
      </div>
      <div class="cite ztag fc03 phide"></div>
    </div>
   </div>
  </div>
</div>


<script type="text/javascript">
var wumiiPermaLink = "http://blog.163.com/huchengsz@126/blog/static/73483745201181824629285/"; //文章的永久链接，作为文章的唯一标识
var wumiiTags = ""; //文章标签，以英文逗号分隔，如："标签1,标签2"
var wumiiSitePrefix = "http://blog.163.com/huchengsz@126/"; //博客的主页地址，作为博客的唯一标识
var wumiiParams = "&num=5&mode=3&pf=blog163"; //num为默认显示的相关文章数目，mode为默认的显示模式（1为文字，2为图片，3为自动）
</script>
<script type="text/javascript" src="./Epoll模型详解 - 成的日志 - 网易博客_files/relatedItemsWidget.htm"></script>
</div>
      <div class="l cl h100">&nbsp;</div>
      <div class="r cr h100">&nbsp;</div>
    </div>
    <div class="nb-mb lcr bh space">
      <div class="l bl bh">&nbsp;</div>
      <div class="r br bh">&nbsp;</div>
      <div class="c bc bh lcr">&nbsp;</div>
    </div>
  </div>

</div>
      <div class="l wl g lg h100">&nbsp;</div>
      <div class="l wl t lt">&nbsp;</div>
      <div class="l wl b lb">&nbsp;</div>
      <div class="r wr g rg h100">&nbsp;</div>
      <div class="r wr t rt">&nbsp;</div>
      <div class="r wr b rb">&nbsp;</div>
    </div>
  </div>
  <div class="nb-are nb-smb"><div class="wkg h space"><div class="l h">&nbsp;</div><div class="r h">&nbsp;</div><div class="c h">&nbsp;</div></div></div>
<div class="nb-are nb-fot">
  <div class="wkg h">
    <h2>页脚</h2>
    <div class="k">      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://corp.163.com/index_gb.html">公司简介</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://gb.corp.163.com/gb/contactus.html">联系方法</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://corp.163.com/gb/job/job.html">招聘信息</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://help.163.com/?b13abk1">客户服务</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://corp.163.com/gb/legal/legal.html">隐私政策</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://blog.163.com/public/theme/">博客风格</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://blog.163.com/services/wapblog.html">手机博客</a>
      <span class="p fc10">-</span>
      <a rel="nofollow" class="m2a fc08" target="_blank" href="http://blog.163.com/vip.do">VIP博客</a>
      
      <link rel="alternate" type="application/rss+xml" title="RSS" href="http://blog.163.com/huchengsz@126/rss/">
      <span class="p fc10">-</span><span class="fc08" id="$_foot_subscribe"><span class="iblock m2a icn0 icn0-919">&nbsp;</span><a class="m2a fc08">订阅此博客</a></span>
    </div>
    <p class="fc08">网易公司版权所有&nbsp;&#169;1997-2013</p>
  </div>
</div></div>
    <!--[if lte IE 6]></div><![endif]-->
  <!--[if lte IE 6]></div><![endif]-->
  <div class="nb-layer" id="blog-163-com-layer"><div class="ui-1024507192 postadlayer nbw-win nbwindow nbwinautoheight" style="bottom: -300px;"><div class="nbwinwrap"> <div class="zcls zflg" title="关闭"><div class="txtclose">×</div></div> <div class="ztbr noselect zflg"><div class="zttl thide zflg">信息提示</div></div> <div class="zcnt zflg"><div class="" style="top: 100px; left: 200px;"><div class="m-postadlayer" style=""><embed style="width:290px;height:260px;" wmode="transparent" src="http://img1.126.net/channel8/014191_290_260_0705.swf?1373245954729" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer" allowfullscreen="true"><div style="position:absolute;top:0px;height:260px;width:100%"> </div><a class="adlink" href="http://g.163.com/a?CID=22282&Values=15400587&Redirect=http://e.cn.miaozhen.com/r.gif?k=1006719&p=3ybhR0&vo=3c79c703e&vr=2&rt=2&ns=[M_ADIP]&ni=[M_IESID]&na=[M_MAC]&o=http%3A%2F%2Fwww.4008823823.com.cn%3Futm_campaign%3D39Free0701wave2%26utm_source%3D163%26utm_medium%3Dblog%26utm_content%3Dbanner" target="_blank"></a><div class="ztag close"></div><div class="cnt" style="left:19px;width:260px;"><div class="sep" style="width:255px;"><a style="margin-right:4px;margin-top:2px;display:block;width:60px;overflow:hidden;" class="pleft" href="http://blog.163.com/" target="_blank"><img style="width:60px;height:52px;" src="./Epoll模型详解 - 成的日志 - 网易博客_files/20130725083139caed2.jpg"></a><ul class="pleft" style="margin-top:-3px;overflow:hidden;width:190px;text-overflow: ellipsis;"><li><a style="letter-spacing:-0.5px;" href="http://blog.163.com/" target="_blank"><b>实拍新疆小贩磨刀割肉</b></a></li><li><a href="http://xinzhoukan.vip.blog.163.com/blog/static/11550407220136240290892/" target="_blank">富人必须处理好的三种关系</a></li><li><a href="http://shishusivip.blog.163.com/blog/static/1676189432013624320998/" target="_blank">史上最难就业季中的'拼爹'</a></li></ul></div><ul class="clearfix down"><li><a href="http://blog.163.com/" target="_blank">赵楚：'大师'王林与中国特色的佞人政治</a></li><li><a href="http://usyaohongen.blog.163.com/blog/static/130696102201362423537720/" target="_blank">英国王子与中国狗剩难平等</a></li><li><a href="http://blog.163.com/wangluanfeng@126/blog/static/171716575201362432728/" target="_blank">动车事故主要责任人今何在</a></li><li><a href="http://yaoshujiewy.blog.163.com/blog/static/200878168201362563431816/" target="_blank">姚树洁：西安已沦为鬼城？</a></li><li><a href="http://weiyingjie1974.blog.163.com/blog/static/1300491122013624102819221/" target="_blank">魏英杰：回归繁体字不现实</a></li></ul></div></div></div></div> <div class="zbtnbar zflg"></div> <div class="zext zext0" style="width: 278px; left: 6px;">&nbsp;</div> <div class="zext zext1" style="width: 278px; left: 6px;">&nbsp;</div> <div class="zext zext2" style="height: 206px; top: 23px;">&nbsp;</div> <div class="zext zext3" style="height: 206px; top: 23px;">&nbsp;</div> <div class="zext zext4">&nbsp;</div> <div class="zext zext5">&nbsp;</div> <div class="zext zext6">&nbsp;</div> <div class="zext zext7">&nbsp;</div> </div></div></div>
  
<script type="text/javascript">
  window.N = {tm:{'zbtn':'nbtn',
                  'bdc0':'bdc0','bdc2':'bdc1',
				  'bgc0':'bgc0','bgc1':'bgc1','bgc2':'bgc2','bgh0':'bgc9',
				  'fc00':'fc03','fc01':'fc04','fc02':'fc05','fc03':'fc06','fc04':'fc07','fc05':'fc09'}};
  Date.servTime = '07/25/2013 14:23:32';
  location.api = 'http://api.blog.163.com/';
  location.msg = 'http://api.blog.163.com/msg/dwr';
  location.dwr = 'http://api.blog.163.com/huchengsz@126/dwr';
  location.vcd = 'http://api.blog.163.com/cap/captcha.jpgx?parentId=73483745&r=';
  location.mrt = 'http://b.bst.126.net/newpage/style/mbox/';
  location.fce = 'http://os.blog.163.com/common/ava.s?host=';
  location.fce2= 'http://os.blog.163.com/common/ava.s?host=';
  location.passportfce = 'http://os.blog.163.com/common/ava.s?passport=';
  location.fpr = 'http://b.bst.126.net/common/portrait/face/preview/';
  location.f60 = 'http://b.bst.126.net/common/face60.png';
  location.f140= 'http://b.bst.126.net/common/face140.png';
  location.f40 = location.f140;
  location.adf140= 'http://b.bst.126.net/common/admireface140.png';
  location.ept = 'http://b.bst.126.net/common/empty.png';
  location.guide_profile_add= 'http://b.bst.126.net/common/guide_profile_add.gif';
  location.phtoto_dream = 'http://photo.dream.163.com/blog/writeBlogCallback.do';
  window.CF = {
    ca:false
   ,cb:''
   ,cc:false
   ,cd:false
   ,ce:'-3'
   ,ck:0
   ,ci:['api.blog.163.com'
       ,'http://photo.163.com/photo/html/crossdomain.html?t=20100205'
        
        ,'ud.blog.163.com'
        
        
        
        ]
   ,cj:[-3]
   ,cl:''
   ,cm:["","blog/","album/","music/","collection/","friends/","profile/","pprank/"]
   ,cf:0
   ,co:{pv:false
       ,ti:4124
       ,tn:''
       ,tc:0
       ,tl:3
       ,ut:0
       ,un:''
       ,um:''
       ,ui:0
       ,ud:false}
   ,cp:{nr:0
       ,cr:0
       ,vr:-100
       ,fr:0}
   ,cs:0
   ,ct:{'nav':['首页','日志','相册','音乐','收藏','博友','关于我'],'enabled':[0,1,6],'defaultnav':parseInt('1111111',2)}
   ,cu:false
   ,cv:false
   ,cw:false
  };
  window.UD = {};
  UD.host = {
      userId:73483745
     ,userName:'huchengsz@126'
     ,nickName:'成'
     ,imageUpdateTime:-1
     ,baseUrl:'http://blog.163.com/huchengsz@126/'
     ,gender:'他'
     ,email:'huchengsz@126.com'
     ,photo163Name:'huchengsz@126'
     ,photo163HostName:'huchengsz@126'
     ,TOKEN_HTMLMODULE:''
     ,isMultiUserBlog:false
     ,isWumiUser:true
     ,sRank:-100
  };
</script>
    <script type="text/javascript" src="./Epoll模型详解 - 成的日志 - 网易博客_files/pc.js"></script><iframe width="0" height="0" src="./Epoll模型详解 - 成的日志 - 网易博客_files/crossdomain.htm" id="api.blog.163.com" name="api.blog.163.com" onload="J.a(&#39;api.blog.163.com&#39;);" style="display:none;"></iframe><iframe width="0" height="0" src="./Epoll模型详解 - 成的日志 - 网易博客_files/crossdomain(1).htm" id="photo.163.com" name="photo.163.com" onload="J.a(&#39;photo.163.com&#39;);" style="display:none;"></iframe><iframe width="0" height="0" src="./Epoll模型详解 - 成的日志 - 网易博客_files/login.htm" id="ud.blog.163.com" name="ud.blog.163.com" onload="J.a(&#39;ud.blog.163.com&#39;);" style="display:none;"></iframe>
    <script type="text/javascript" src="./Epoll模型详解 - 成的日志 - 网易博客_files/pm.js"></script>
  <script src="./Epoll模型详解 - 成的日志 - 网易博客_files/ntes.js" type="text/javascript"></script>
  <script type="text/javascript">
    _ntes_nacc='blog';neteaseTracker();
    
    new Image().src = 'http://blog.163.com/newpage/images/analyse.png?s=p&t='+new Date().getTime();
  </script>

<script type="text/javascript">
    window.setTimeout(function(){
			J.loadScript('http://music.ph.126.net/ph.js?001');
			
			J.postDataByDWR(location.dwr,'MusicBeanNew','setCopyrightMusicSessionToken',false);
	},1000);
</script>

    <script type="text/javascript" src="./Epoll模型详解 - 成的日志 - 网易博客_files/prettify.js"></script>


</body></html>